require(["ta/rollupAmdShim"],function(a){a.install(["lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","ta/Core/TA.LocalStorage","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","overlays/options/repositionOnTaEvent","ta/Core/TA.FireEvent","utils/urlDecoder","ta/util/ActionRecord","ta/util/Cookie","ta/popups/CookieSettingsPanel","ta/util/Currency","vanillajs","utils/ajax","common/Radio","ta/registration/RegEvents","utils/throttle","widget/components","utils/asdf-encoder","ta/util/CommonMessagingUtil","api-mod","ta/Core/TA.Store","utils/IntlFormatter"],["page-model"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"short_lived_global_legacy",files:{js3_secure:{ssl:{ta:{Core:{"TA.Record":1}}}},"js-amd":{src:{utils:{throttle:1,urlDecoder:1,"asdf-encoder":1,ajax:1},"api-mod":1,overlays:{options:{fade:1,matchWidth:1,autoReposition:1,centerArrowOnSrcElement:1,repositionOnTaEvent:1,closeOnDocClick:1,closeOnScroll:1},styles:{flyout:1},position:1},vanillajs:1}},js3:{lib:{"jquery-amd":1},build:{es6:{src:{widget:{components:1},common:{Radio:1},utils:{IntlFormatter:1},overlays:{Overlay:1}}}},src:{ta:{util:{Cookie:1,CommonMessagingUtil:1,ActionRecord:1,Currency:1},popups:{CookieSettingsPanel:1},registration:{RegEvents:1},Core:{"TA.FireEvent":1,"TA.Event":1,"TA.LocalStorage":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
define("lib/jquery-amd",[],function(){return window.Zepto||ta.jquery||window.jQuery});
define("ta/Core/TA.Record",["vanillajs","ns-exporter","ta/Core/TA.Store","purify","ajax-request","utils/objutils","utils/urlDecoder"],function(e,t,n,r,a,o,i){"use strict";var u={},l={},c=[],s=8,d="impressionTrackingTree",g=0,f=1,v=2,p="UserTracking",m="impression",h="action",k="pageview",y="search",E=[],T=60,P=function(e){return"function"==typeof e},b=function(e,t){try{if(!e||"object"!=typeof t)return;if(window.JSON&&JSON.stringify){var n=JSON.stringify(t);n&&n.length<1e5&&(E.push([e,n]),E.length>T&&E.shift())}}catch(e){}},_=function(e,t,n,r){a(e,t).then(n,r),b(e,t)},S=function(){if(require.defined("ta/util/Error")){var e=require("ta/util/Error");e.record.apply(e,arguments)}else ta&&ta.m&&P(ta.m.recordJSError)&&ta.m.recordJSError(arguments)},C=function(e){return"undefined"==typeof e||null==e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*"))},w=function(e){var t=[];for(var n in e){var r=e[n];t.push(C(n)+"."+C(r))}return t.join("*")},A=function(e){return"undefined"==typeof e||null===e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*").replace(/\~/g,"!~"))},N=function(e){var t=[];for(var n in e){var r=e[n];t.push(A(n)+"."+A(r))}return t.join("*")},R=function(e){var t=/(https?:\/\/[^\/]+)?\/([^#.?-]*)/,n=t.exec(e);return n&&"undefined"!=typeof n[2]?n[2]?n[2]:"Home":null},O=function(){var e=u.getPageData();if(e&&e.url)return e.url.substring(1);var t=/\/([^-]*)/.exec(window.location.pathname);return t?t[1]:null},I=function(e,t,n){var r=new RegExp("(-"+t+"([0-9]+))|([?&]"+n+"=([0-9]+))"),a=r.exec(e);if(a){if("undefined"!=typeof a[2])return a[2];if("undefined"!=typeof a[4])return a[4]}return null},M=function(e){return I(e,"d","detail")||I(e,"g","geo")},x=function(e){var t=document.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");return!!t&&(t=t[1],0===t.indexOf("%1%")&&(t=t.substring(3)),decodeURIComponent(t))},L=function(e,t,n){try{var r;n.encode&&(t=encodeURIComponent(t)),n.domain&&(t+="; domain="+n.domain),n.path&&(t+="; path="+n.path),n.duration&&(r=new Date,r.setTime(r.getTime()+1e3*n.duration),t+="; expires="+r.toGMTString()),n.secure&&(t+="; secure"),document.cookie=e+"="+t}catch(e){S(e,"_setCookieInSeconds",null,arguments)}},q=function(){return ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")?ta.m.store.get("bookingSessionId"):null},D=function(){var e=!1;return"boolean"==typeof ta.userLoggedIn&&(e="boolean"==typeof ta.userSecurelyLoggedIn?ta.userLoggedIn?ta.userSecurelyLoggedIn?v:f:g:ta.userLoggedIn),e},H=function(e,t){var r={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:O(),gasl:M(document.location.href),gads:R(t),gadl:M(t),gapu:ta.uid,gams:D()},a=q();if(!r.gass)throw new Error("Src servlet undefined, gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);if(!r.gads)throw new Error("Dst servlet undefined. gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);n.has("gatt")&&(r.gatt=n.retrieve("gatt")),a&&(r.bsid=a),L("EVT",w(r),{domain:cookieDomain,duration:5,encode:!0,path:"/"})},U=function(e){if(!e||!e.className||!e.firstChild)return!1;var t=new RegExp("\\b"+d+"\\b"),n=e.firstChild.nodeType,r=e.firstChild.nodeValue;return t.test(e.className)&&n===s&&""!==r},j=function(){};require.defined("page-model")&&require(["page-model"],function(e){var t=e.session,r=t.analyticsInfo;r&&(n.keep("partials.pageProperties",r.pagePropertyStringForCurrentPageview),n.store("gaMemberState",r.memberState),t.analyticsInfo&&require.defined("ta/Core/TA.Prerender")&&require("ta/Core/TA.Prerender")._init(!0)),j=function(){r&&c.push(JSON.parse(r.jsonForCurrentPageview)),j=function(){}}}),u.getPageData=function(){return j(),c[c.length-1]},u.pushPageData=function(e){j(),e&&c.push(e)},u._GARecordRequest=function(e,t){var r,a={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:O(),gasl:document.location?M(document.location.href):null,gapu:ta.uid,gams:D()},o=q();return t&&(a.gacl=t),n.has("gatt")&&(a.gatt=n.retrieve("gatt")),o&&(a.bsid=o),r=require.defined("utils/BatchRequest")?{get:function(){require("utils/BatchRequest").queue("/GARecord",a)}}:{get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/GARecord?"+J(a),!0),e.send(null)},1)}},b("/GARecord",a),r};var J=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};l.urlArgLookup=function(e,t){var n=new RegExp("[\\?&]"+e+"=(\\w+)"),r=n.exec(t);return r&&"undefined"!=typeof r[1]?r[1]:null},u._validatedTrackEventArray=function(e,t,n,r,a){return e&&"string"!=typeof e&&(e=e.toString()),t&&"string"!=typeof t&&(t=t.toString()),n&&"string"!=typeof n&&(n=n.toString()),r?"number"!=typeof r&&(r=parseFloat(r),isNaN(r)&&(r=0)):r=0,"boolean"!=typeof a&&(a=a===!0),["_trackEvent",e,t,n,r,a]},u._toEvtParams=function(e){try{var t={gac:e.module,gaa:e.action,gal:e.context,gav:e.value,gani:e.noninteraction};return t.gass=O(),t.gasl=M(document.location.href),t.gapu=ta.uid,t.gams=D(),t}catch(t){S(t,"analytics._toEvtParams",null,e)}},u._trackEventAfterAjax=function(e){try{l.trackDMPBehavior(e.module,e.action,e.context,e.value,e.noninteraction)}catch(t){S(t,"analytics._trackEventAfterAjax",null,e)}},l.getEventPathOptions=function(e,t,n){try{var r=Z(n,e);if(!r)return void S(null,"ta.getEventPathOptions - invalid element",null,arguments);var a=z(r);return t&&(a.noninteraction=t),a}catch(e){S(e,"ta.getEventPathOptions",null,arguments)}},u._trackEventPathAfterAjax=function(e){try{l.trackEventOnPage(e.category,e.action,e.label,e.value,e.noninteraction)}catch(e){S(e,"analytics._trackEventPathAfterAjax",null,arguments)}},l.trackPhysicalCommerce=function(e,t,n,r){try{var a=u._validatedTrackEventArray(e,"Commerce-Physical",t,n,!1);u._GARecordRequest(a,r).get()}catch(e){S(e,"ta.trackPhysicalCommerce",null,arguments)}},l.trackAttemptedCommerce=function(e,t,n){try{l.trackDMPBehavior(e,t,n,null,null)}catch(e){S(e,"ta.trackAttemptedCommerce",null,arguments)}},l.trackPhysicalAndAttemptedCommerce=function(e,t,n,r,a){l.trackPhysicalCommerce(e,t,r,a),l.trackAttemptedCommerce(e,t,n,r)},l.trackImpressionEventOnPage=function(e,t,n,r){e=e||"",t=t||"",n=n||"",r=r||0,l.trackEventOnPage(e,t,n,r,!0)},l.trackEventOnPage=function(e,t,n,r,a){i.isObfuscatedProductCode(e)&&(e=i.decodeProductCode(e)),i.isObfuscatedProductCode(t)&&(t=i.decodeProductCode(t)),i.isObfuscatedProductCode(n)&&(n=i.decodeProductCode(n));try{var o=u._validatedTrackEventArray(e,t,n,r,a);u._GARecordRequest(o).get()}catch(e){S(e,"ta.trackEventOnPage",null,arguments)}},l.trackEventOnPageOnce=function(e,t,r,a){var o,i="eventsAlreadyTracked";o="object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.get(i):n.retrieve(i),o||(o={},"object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.add(i,o):n.store(i,o));var u=e+"|"+t+"|"+r;o[u]||(l.trackEventOnPage(e,t,r,0,a),o[u]=!0)},l.trackDMPBehavior=function(e,t,n,r,a){},l.setEvtCookie=function(e,t,n,r,a){try{var o=u._validatedTrackEventArray(e,t,n,r,!1);if(H(o,a),require.defined("ta/common/behavior/dmp/DMP")){var i=require("ta/common/behavior/dmp/DMP");i.isEnabled()&&i.sendEventBehavior(e,t,n,r,X())}}catch(e){S(e,"ta.setEvtCookie",null,arguments)}};var W=function(e){var t;try{if(t=x("MEVT")||"",t.length>0&&(t+="~"),t+=N(e),t.length>1024)throw"MEVT Cookie is full";L("MEVT",t,{domain:cookieDomain,duration:5,encode:!0})}catch(e){return S(e,"_appendMevtCookie",null,arguments),!1}return!0},G="trk",B=G.length,V="etk",F=/^([A-Z]{1,2}:)?[A-Za-z_0-9\-\.]+$/,X=function(){var e="undefined"!=typeof event?event:window.event;return e?e.target||e.srcElement:document.activeElement};u.getCommentTrackingPath=function(e,t){return Z(e,t)};var Z=function(e,t){if(e=r(e),!e&&(e=X(),!e))return S(null,"_getCommentTrackingPath - no element provided or event target element",null,arguments),null;if(1!=e.nodeType)return null;var n=[];if(t&&"string"==typeof t&&""!==t&&F.test(t)){if("P:"==t.substring(0,2))return n.push(t.substring(2)),n;n.push(t)}if("undefined"==typeof e.previousSibling)return S(null,"_getCommentTrackingPath - browser does not support previousSibling",null,arguments),n;e:for(var a=e;a!=document.body;a=a.parentNode){if(null==a){S(null,"_getCommentTrackingPath - LOOP_PARENT_NODES got unexpected null node",null,arguments);break}for(var o=0,i=a.previousSibling;null!=i;i=i.previousSibling)if(i.nodeType==s){var u=i.nodeValue;if(u==V){o++;continue}if(u.substring(0,B)!=G)continue;if(o>0){o--;continue}var l=u.substring(B).split("/");l||S(null,'ta._getCommentTrackingPath - cannot split context class: "'+u+'"',null,arguments);for(var c=l.length-1;c>=0;c--){var d=l[c],g=F.exec(d);if(g){if("P:"==g[1]){var f=g[0].substring(2);n.push(f);break e}n.push(g[0])}else S(null,'ta._getCommentTrackingPath - tracking prefix used with invalid context: "'+l[c]+'"',null,arguments)}}}return n},z=function(e){if(0===e.length)return null;var t={action:e[0],label:"",value:"1",category:e[e.length-1]};e.shift();for(var n=e.length-2;n>=0;n--)t.label+=e[n],n>0&&(t.label+="/"),"N:"==e[n].substring(0,2)&&(t.value=e[n].substring(2));return""===t.label&&(t.label="Unknown"),t};l.trk=function(e,t,n,a){n=r(n);try{var o=n?n.getAttribute("data-trk-path"):null;if(o)o=o.replace("P:",""),o=o.split("/"),o.reverse();else if(o=Z(n,e),!o||!o.length){var i="";if(n)if(n.outerHTML){var u=document.createTextNode(n.outerHTML),c=document.createElement("div");c.appendChild(u),i=c.innerHTML.substring(0,100)}else n.nodeName?i=n.nodeName:i+=n;else void 0===n?i="undefined":null===n&&(i="null");return e||(e=null===o?"null path":void 0===o?"undefined path":o.hasOwnProperty("length")?0===o.length?"empty path":o.join(","):"path: "+o),void S(null,"ta.trk - invalid element for "+e+" from "+i,null,arguments)}l.trkWithPath(o,t,a)}catch(e){S(e,"ta.trk",null,arguments)}},l.trkWithPath=function(e,t,n){try{if(!e||!e.length)return void S(null,"ta.trkWithPath - no path in arguments",null,arguments);if(n&&n.length>0&&e.length&&e.splice)for(var r=n.length-1;r>=0;r--)"string"==typeof n[r]&&e.splice(1,0,n[r]);var a=z(e);l.trackEventOnPage(a.category,a.action,a.label,a.value,t)}catch(e){S(e,"ta.trkWithPath - "+e,null,arguments)}},l.trkImpTree=function(e){try{if(!U(e))return void S(null,"ta.trkImpTree called with invalid trackTreeElem!",null,arguments);var t=e.firstChild.nodeValue;te(t)}catch(e){S(e,"ta.trkImpTree",null,arguments)}},l.recordImpression=function(e,t){if(!e)return void(t&&t());try{te(Q(e),t)}catch(e){S(e,"ta.recordImpression",null,arguments),t&&t()}};var $="<!--",K="-->",Q=function(e){var t=e.indexOf($),n=0,r=e.indexOf(K);return t!==-1&&(n=t+$.length),r===-1&&(r=e.length),e.substring(n,r)};u.stripCommentsFromTree=Q;var Y="\\",ee="/";u.appendAscendTokens=function(e){var t=0,n=0,r=0;for(t=0;t<e.length;t++)if(e[t]===ee)r++;else if(e[t]===Y)for(n=t+1;n<e.length&&e[n]===Y;)r--,t=n,n++;if(r>0)for(t=0;t<r;t++)e+=Y;return e};var te=function(e,t){var n={tTreeStr:e&&e.trim(),tTreeUid:ta.uid&&ta.uid.trim(),tTreeLastReferrer:window.location.href,tTreeIsMemberSignedIn:D()};ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")&&(n.bsid=ta.m.store.get("bookingSessionId")),n.tTreeStr?n.tTreeUid||S(new Error("tTreeUid is null/undefined/empty."),"ta._sendTreeImpression",null):S(new Error("tTreeStr is null/undefined/empty."),"ta._sendTreeImpression",null),_("/ImpressionRecord",{method:"POST",url:"/ImpressionRecord",data:n},t)};l.setEvtCookieAndPath=function(e,t,n){try{n||(n=X());var r=Z(n,e);if(!r)return void S(null,"ta.setEvtCookieAndPath - invalid element for "+e,null,arguments);var a=z(r);if(!t){for(;"A"!=n.nodeName&&n!=document.body;)n=n.parentNode;if(t=n.href,!t)return void S(null,"ta.setEvtCookieAndPath - no url parameter and cannot find a.href",null,arguments)}l.setEvtCookie(a.category,a.action,a.label,a.value,t)}catch(e){S(e,"ta.setEvtCookieAndPath",null,arguments)}},l.recordPageview=function(e,t){if(e){var n=R(e),r="/PageviewRecord",a=t?t:{};n&&(a.servletName=n,_(r,{method:"POST",data:a}))}},l.recordTabView=function(e,t,n){if(e&&t){var r=e+"-"+t,a="/PageviewRecord",o=n?n:{};o.servletName=r,_(a,{method:"POST",data:o})}},l.resetPageDataUrl=function(){var e=u.getPageData();e&&(e.url="")},l.trackEngagementClick=function(e,t){return e&&t?P(t)?void t(e):void S(new Error("passed variable selectionFunction is not a function"),"ta.trackEngagementClick",null,t):void S(new Error("object/selectionFunction is null/undefined"),"ta.trackEngagementClick",null,arguments)},l.placementNodeSelectorTracker=function(e){if(!e||!e.element||!e.type)return void S(new Error("object/element/type is null/undefined"),"ta.placementNodeSelectorTracker",null,e);var t,n,r,a,o,i,c=e.element,s=e.type,d=u.getCommentTrackingPath(c);if(s+="_Click",!d)return void S(new Error("trackTreePath is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);if(d.length<1)return void S(new Error("trackTreePath is missing information"),"ta.placementNodeSelectorTracker",null,arguments);if(t=d[d.length-1],!t)return void S(new Error("placement is null/undefined"),"ta.placementNodeSelectorTracker",null,d);for(i=d.length-1;i>=0;i--)if(o=d[i],o&&0===o.indexOf("N:")){n=o;break}if("HH_MainList"===t||"Maps_MetaBlock"===t)n="N:1";else if(!n)return void S(new Error("positionNode is null/undefined"),"ta.placementNodeSelectorTracker",null,d);if(r=n.split(":"),!r||2!==r.length)return void S(new Error("positionSplit appears to be incorrect"),"ta.placementNodeSelectorTracker",null,arguments);if(a=r[1],!a)return void S(new Error("position is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);var g=parseInt(a,10);if(isNaN(g))return void S(new Error("position is not a number"),"ta.placementNodeSelectorTracker",null,a);var f=re(t);if(f!==-1){a=g+f,t=ne(t);var v,p=document.querySelectorAll(".ui_tab_bar .ui_tab.selected");1===p.length&&(p=p[0],v=p.getAttribute("data-currentSort")),l.trackEventOnPage(t,s,v,a)}};var ne=function(e){if(!e)return e;if("Hotels"!==O())return"Clicks_"+e;var t;return"Hotels_MainList"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e?t="Clicks_"+e:"sponsored_coupon_listing"===e&&(t="Clicks_Hotels_MainList_Sponsored"),document.getElementById("sponsoredCouponListingWrap")&&"Clicks_Hotels_MainList"===t&&(t+="_Sponsored"),t+=ta.widgets.calendar.getCheckRatesData()?"_PostDates":"_PreDates"},re=function(e){if(!e)return S(new Error("placement is null/undefined"),"ta._shiftOrdinalsWithSponsoredPlacement",null,e),-1;if("Hotels"!==O())return 0;var t=0,r=n.retrieve("hac.offset");if(r&&r>0&&(t=r),!document.getElementById("sponsoredCouponListingWrap"))return t;var a,o=document.querySelector("#HAC_RESULTS .pageNumbers .current");if(o){var i=o.getAttribute("data-page-number");if(a=parseInt(i,10),isNaN(a)||!a)return S(new Error("pageNumber is not a number"),"ta._shiftOrdinalsWithSponsoredPlacement",null,i),-1}return"Hotels_MainList"===e?t+=a:(r&&r>0&&("sponsored_coupon_listing"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e)&&(t+=a-1),t)};l.getRecentTARecords=function(){return E},l.addTypeAheadMevt=function(e){return e.t="ta",W(e)},l.addGARecordMevt=function(e,t,r,a,o){try{var i=u._validatedTrackEventArray(e,t,r,a,!1),l={t:"ga",gac:i[1],gaa:i[2],gal:i[3],gav:i[4],gani:i[5],gass:O(),gasl:M(document.location.href),gads:R(o),gadl:M(o),gapu:ta.uid,gams:D()},c=q();if(!l.gass)throw new Error("Src servlet undefined, gac:"+l.gac+", gaa:"+l.gaa+", gal:"+l.gal);if(!l.gads)throw new Error("Dst servlet undefined. gac:"+l.gac+", gaa:"+l.gaa+", gal:"+l.gal);if(n.has("gatt")&&(l.gatt=n.retrieve("gatt")),c&&(l.bsid=c),W(l),require.defined("ta/common/behavior/dmp/DMP")){var s=require("ta/common/behavior/dmp/DMP");s.isEnabled()&&s.sendEventBehavior(e,t,r,a,X())}}catch(e){S(e,"ta.addGARecordMevt",null,arguments)}},l.trackInteractions=function(e,t,n){var r={elmtSource:e,elmtType:n};r=o.extend(r,t),_("/UserInteractionRecord",{method:"POST",url:"/UserInteractionRecord",data:r},null,function(){S(null,"taRecord.trackInteractions",null,r)})},l.addInteractionsMEVT=function(e,t,n){var r={t:"ia",ias:e,iak:ae(t),iat:n};W(r)};var ae=function(e){var t="";return Object.keys(e).forEach(function(n){t=t+n+"^"+e[n]+"+"}),0==t.length?t:t.slice(0,-1)},oe=!1,ie=function(e,t){return oe||(oe=require.defined("page-model")?require("page-model").session:{}),!!oe.useERUserTracking&&!(oe.ERUserTrackingEventNames&&oe.ERUserTrackingEventNames.length>0&&oe.ERUserTrackingEventNames.indexOf(e)<0)},ue=function(e,t,n){if(ie(e,t)){var r=oe.uid&&{request_uid:oe.uid}||{},a={event_name:e,event_type:t,attr:JSON.stringify(o.extend(n,r))},i={get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/UserTrackingRecord?"+J(a),!0),e.send(null)},1)}};return i.get()}n.event_name=e,l.trackEventOnPage(p,t,JSON.stringify(n))};l.trackImpressionWithJson=function(e,t){ue(e,m,t)},l.trackActionWithJson=function(e,t){ue(e,h,t)},l.trackPageviewWithJson=function(e,t){ue(e,k,t)},l.trackSearchWithJson=function(e,t){ue(e,y,t)},l.trackUnifiedEvent=ue,t.createNs(u,"ta","analytics"),t.exportTo(l,"ta");var le={};return t.exportTo(u,le),t.exportTo(l,le),le});
define("ta/Core/TA.Event",["vanillajs","common/trackingStreams","ns-exporter","ta/Core/TA.FireEvent"],function(vanilla,tracks,nsExporter,fireEvent){function _makeClosure(e,t){var n=this;return t=Array.prototype.slice.call(t),function(){e.apply(n,t)}}function QueueTimer(e,t){var n=0,r=0,o=[],a=0,u=!1;this.start=function(){n&&clearTimeout(n),a=Date.now()},this.end=function(i){var c=Date.now(),f=c-a;r+=f;var l=""+f+"ms ["+(i||"")+"]",s=e+(t?"-after":"");u?console.error("Straggler for "+s+": "+l):(o.push(l),n=setTimeout(function(){console.error("Timing for "+s+": "+r+"ms\n"+o.sort(function(e,t){return parseInt(e)-parseInt(t)}).join("\n")),u=!0},2e3))}}var exports={on:fireEvent.on,off:fireEvent.off,fireEvent:fireEvent.fireEvent,hasEventListener:fireEvent.hasEventListener};exports.call=function(e,t,n,r){if(null==t)return IS_DEBUG&&alert("You must pass the event.\n\nUsage:\nta.call('ta.namespace.Class.function', event);"),!1;if(null==e)return IS_DEBUG&&alert("ta.call of undefined function"),!1;var o=e;if("function"==typeof e)e="<func>";else if(!/^ta\.[\w\d\.]+$/.test(e))return IS_DEBUG&&alert("Invalid function name. Must be of the form: ta.namespace.Class.function"),!1;var a=t||window.event;["stopPropagation","preventDefault"].forEach(function(e){a[e]||(a[e]=function(){})}),a.stop||(a.stop=function(){a.preventDefault(),a.stopPropagation()}),n||(n=a.target||a.srcElement),n||tracks.error(null,"ta.call re-wrap fail (non-DOM element) - "+e,t,{"funcName":e});var u=arguments,i=Array.prototype.slice.call(u,3);i.splice(0,0,a,n);try{return i.unshift({callback:_ta_call_defer,evt:a}),i.unshift(o),exports.run.apply(null,i)}catch(n){tracks.error(n,"ta.call - "+e,t)}return!1};var _ta_call_defer=function(e,t){t&&delete t.evt,exports.run.apply(null,arguments)};exports.run=function(e,t){var n=arguments,r=Array.prototype.slice.call(n,2);try{var o=exports.fn(e);if("function"==typeof o){var a=o.apply(window,Array.prototype.slice.call(r));if(t&&t.onComplete){var u=exports.fn(t.onComplete);u&&u(a)}return a}t&&t.evt&&(t.evt.stopPropagation?t.evt.stopPropagation():t.evt.cancelBubble=!0,t.evt.preventDefault?t.evt.preventDefault():t.evt.returnValue=!1);var i=_makeClosure(t&&t.callback||exports.run,arguments);require(["trjs!ta/Core/TA.Load"],function(t){try{t.load(e,i)}catch(t){tracks.error(t,"ta.run - "+e)}})}catch(t){tracks.error(t,"ta.run - "+e)}return!1};var OneTimeFunctionQueue=function(e,t,n){function r(){u=!0,c()}var o,a=[],u=!!n,i=function(n,r){o&&o.start();try{n()}catch(n){try{tracks.error(n,"OneTimeFunctionQueue "+e+(t?"-after":"")+(r?"-"+r:""))}catch(e){}}o&&o.end(r)},c=function(){if(a.sort(function(e,t){return e.priority-t.priority||e.subpriority-t.subpriority}),t){var e=1;a.forEach(function(t){setTimeout(i.bind(null,t.func,t.name),e++)})}else a.forEach(function(e){i(e.func,e.name)});a=[]};null!=e&&(window.addEventListener?window.addEventListener(e,r,!1):window.attachEvent&&("DOMContentLoaded"==e?window.attachEvent("onload",r):"load"==e?window.attachEvent("on"+e,function(){setTimeout(r,1)}):window.attachEvent("on"+e,r))),this.addToQueue=function(t,n,r){return t?("string"==typeof n&&(r=n,n=!1),void(u?i(t,r):(n=n||100+a.length,a.push({func:t,priority:n,name:r,subpriority:a.length})))):void tracks.error(null,"addToQueue for "+e+" queue - no function")},this.executeQueue=function(){c()}},loaded="undefined"!=typeof document&&"complete"===document.readyState,ready="undefined"!=typeof document&&"interactive"===document.readyState||loaded,_readyQ=new OneTimeFunctionQueue("DOMContentLoaded",!1,ready),_loadQ=new OneTimeFunctionQueue("load",!1,loaded),_afterLoadQ=new OneTimeFunctionQueue("load",!0);ready||_loadQ.addToQueue(function(){_readyQ.executeQueue()},-999999999,"checkReadyQueue"),_loadQ.addToQueue(function(){_afterLoadQ.executeQueue()},999999999,"afterLoadQueue"),exports.queueForReady=function(e,t,n){_readyQ.addToQueue(e,t,n)},exports.queueForLoad=function(e,t,n){_loadQ.addToQueue(e,t,n)},exports.queueForAfterLoad=function(e,t){_afterLoadQ.addToQueue(e,0,t)},exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=!1;try{f=eval(fn)}catch(e){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(e){}}if(f&&"function"==typeof f)return f}return null},exports.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},exports.throttle=function(e,t,n,r){function o(){delete m_throttles[t],a.cb()}var a,u=(new Date).getTime();if(t in m_throttles){if(a=m_throttles[t],u-a.lastReset<a.minResolution)return void(a.cb=e)}else a=m_throttles[t]={start:u,minResolution:Math.max(Math.floor(n/10),50)};a.cb=e,a.timeout&&clearTimeout(a.timeout),r&&u-a.start>r?o():(a.lastReset=u,a.timeout=setTimeout(o,n))};var m_throttles={};return nsExporter.exportTo(exports,ta),exports});
define("ta/Core/TA.LocalStorage",["vanillajs","common/trackingStreams","ns-exporter"],function(e,t,n){"use strict";var r=!1,o="taLsTest",i="1",a="TALocalStorageCurrentSessionId",u=!1,s="session-",l=!1,c=[],f=[],v=[],g=function(){return!(!u&&!l)},m=function(e){return!!g()||(t.error(null,"Accessing localStorage session cookie before session logic intialized: "+e),!1)},S=function(e){return d(e,"value")},y=function(e){return d(e,"now")},d=function(e,t){if(!t)return null;try{var n,o=JSON.parse(r.getItem(e)||"0");return o?o.ttl&&o.ttl+o.now<(new Date).getTime()?(r.removeItem(e),null):o.hasOwnProperty(t)?(r.setItem("512",o[t]),n=r.getItem("512"),r.removeItem("512"),n):null:null}catch(e){}return null},h=function(e,t){try{var n=JSON.parse(e||"0");return n&&n.hasOwnProperty(t)?n[t]:null}catch(e){return null}},w=function(e){try{var t=JSON.parse(r.getItem(e)||"0");return t?t.ttl&&t.ttl+t.now<(new Date).getTime()?(r.removeItem(e),null):t.value:null}catch(e){}return null},I=function(e){try{r.removeItem(e)}catch(e){}},p=function(e,t){var n=y(e);if(t&&n&&n<(new Date).getTime()-t)try{r.removeItem(e)}catch(e){}},O=function(e){try{var t=r.getItem(e);if(null!==t&&void 0!==t)return!0}catch(e){}return!1},T=function(e,t,n){try{r.setItem(e,JSON.stringify({ttl:n||0,now:(new Date).getTime(),value:t}))}catch(e){}},k=function(e){if(l=!0,!e)return t.error(null,"Attempting to initialize localStorage with invalid sesion key: "+e),!1;if(!V())return!1;if(u=S(a),!u||u!=e){u=e,T(a,u);var n=S("latestPageServlet");n&&T("sessionEntryServlet",n),E(),O(a)&&require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").store("isFirstSessionPageView",!0)}for(var r=0;r<v.length;r++)v[r]();v=[]},E=function(){try{var e=s+u,t=new RegExp("^"+s);if(r.length)for(var n=0;n<r.length;n++){var o=r.key(n);try{t.test(o)&&o!=e&&I(o)}catch(e){}}}catch(e){}},V=function(){try{if(r&&r.setItem){r.setItem(o,i);var e=r.getItem(o)!=i;return r.removeItem(o),e&&(r=!1),!!r}}catch(e){}return!1},N=function(e){try{r.setItem("session-"+u,JSON.stringify(e))}catch(e){}},b=function(){try{var e=r.getItem("session-"+u);if(e)return JSON.parse(e)}catch(e){}return{}},A=function(e){c.push(e)},C=function(e,t){f[e]||(f[e]=[]),f[e].push(t)},J=function(e){"function"==typeof e&&(g()?e():v.push(e))},L={enabled:V(),get:S,getObject:w,set:T,remove:I,removeIfElapsed:p,has:O,getTimeStamp:y,updateSessionId:k,onSessionStorageChange:A,onValueChange:C,canUseSession:g,onLocalStorageSessionInit:J,getSessionKey:function(e){if(!m(e))return null;var t=b();return t?t[e]:null},setSessionKey:function(e,t){if(m(e)){var n=b();n||(n={}),n[e]=t,N(n)}},removeSessionKey:function(e){if(m(e)){var t=b();t&&(delete t[e],N(t))}},hasSessionKey:function(e){if(!m(e))return!1;var t=b();if(t){var n=t[e];if(null!==n&&void 0!==n)return!0}return!1},setStorage:function(e){r=e,L.enabled=V()}};if("undefined"!=typeof window){var j=!1;try{j=window.localStorage}catch(e){}L.setStorage(j),function(){function e(e){if(e=e||window.event,!u||e.key&&e.key!=="session-"+u)e.key&&f[e.key]&&(e.oldValueObj=e.oldValue&&h(e.oldValue,"value"),e.newValueObj=e.newValue&&h(e.newValue,"value"),f[e.key].forEach(function(t){t(e)}));else for(var t=0,n=c.length;t<n;t++)c[t](e)}window.addEventListener?window.addEventListener("storage",e,!1):window.attachEvent&&window.attachEvent("onstorage",e)}()}return n.createNs(L,"ta","localStorage"),L});
define("overlays/Overlay",["babel/babel-helpers","api-mod","mixins/mixin","mixins/Events","overlays/utils","utils/array/flatten","utils/bindAll"],function(t,e,n,i,s,r,o){var h=function(){function h(e){var s=this;t.classCallCheck(this,h),this.sourceElement=e,this.domParent=document.body,this.container=null,this.contentElement=null,n(this,new i("show","hide","destroy","positionDirty","hover","contentsUpdated")),o(this,"show","hide","destroy");for(var l=arguments.length,a=Array(l>1?l-1:0),u=1;u<l;u++)a[u-1]=arguments[u];r(a).filter(function(t){return"function"==typeof t}).forEach(function(t){return t.call(s)})}return t.createClass(h,[{key:"isOpen",value:function(){return e.inDocument(this.container)}},{key:"show",value:function(){return e.inDocument(this.container)?this:(this.domParent.appendChild(this.container),this.container.overlay=this,this.emit("append"),this.emit("show"),this)}},{key:"hide",value:function(t){return e.inDocument(this.container)?(delete this.container.overlay,this.domParent.removeChild(this.container),this.emit("hide",{trigger:t}),this):this}},{key:"destroy",value:function(t){return this.hide(t),this.emit("destroy",{trigger:t}),this.sourceElement=null,this.contentElement=null,this}},{key:"reposition",value:function(){return this.emit("positionDirty"),this}},{key:"updateContent",value:function(t){return this.contentElement.innerHTML="",s.injectContentWithDataAttrs(this.contentElement,this.sourceElement,t),this.emit("contentsUpdated"),this.reposition(),this}}]),h}();return h});
define("overlays/styles/flyout",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.container=e.createElement("div",{"class":"ui_overlay ui_flyout"+(t?" "+t:"")}),this.contentElement=this.container}var i=function(t,e){return function(){n.call(this,e||this.sourceElement.getAttribute("data-flyout")||""),this.updateContent(t)}};return i});
define("overlays/position",["vanillajs","api-mod","overlays/utils","ta/Core/TA.Event","overlays/position/base"],function(t,n,e,o,r){"use strict";function i(t,o,i,u){return function(l,a,p,x){var h=r();return h.onPosition=function(){var r=n.getSize(this.arrow)||{x:0,y:0},h=f(l,this.sourceElement),y=h?n.getSize(h):{x:0,y:0},d=h?n.getPosition(h):{left:0,top:0},m=n.getSize(this.domParent),g=e.parseOffsets(c(l)),v=!h||a||s(this.sourceElement),T=e.parseOffsets(x);this.container.style.position=v&&!p?"fixed":"absolute";var b=n.getSize(this.container);h&&h.getAttribute("data-anchorWidth")&&(n.hasClass(document.body,"rtl")?(d.left+=y.x,y.x=Number(h.getAttribute("data-anchorWidth")),d.left-=y.x):y.x=Number(h.getAttribute("data-anchorWidth")));var L=function(t,n,e,o){if("function"==typeof t){var i=Math.floor(t(b,r,y,d,m,v))+n;return this.domParent===document.body&&(i=Math.max(i,e),i=Math.min(i,o)),i+"px"}return"auto"}.bind(this);t&&o&&i&&u&&!p&&(this.container.style.position="fixed");var C=Math.max(Math.min(T.x,(m.x-b.x)/2),0);this.container.style.left=L(t,g.x,C,Math.max(m.x-b.x-C,C)),this.container.style.right=L(i,g.x,C,Math.max(m.x-b.x-C,C)),this.container.style.top=L(o,g.y,-Number.MAX_VALUE,Number.MAX_VALUE),this.container.style.bottom=L(u,g.y,-Number.MAX_VALUE,Number.MAX_VALUE)},h}}function u(t,e){return function(){return function(){function o(){var o=n.getSize(this.container);this.container.style.position="fixed",t&&(n.hasClass(document.body,"rtl")?(this.container.style.right="50%",this.container.style.marginRight=-o.x/2+"px"):(this.container.style.left="50%",this.container.style.marginLeft=-o.x/2+"px")),e&&(this.container.style.top="50%",this.container.style.marginTop=-o.y/2+"px")}this.on("show",o),this.on("positionDirty",o)}}}function l(){return function(){return function(){function t(){n.addClass(this.container,"cssCentered")}this.on("show",t),this.on("positionDirty",t)}}}function f(t,e){return t&&t.length&&isNaN(t[0])?n.isElement(t[0])?t[0]:e&&n.find(t[0],e):e}function c(t){return t&&t.length&&isNaN(t[0])?t.slice(1):t}function s(t){function n(t){return"fixed"===t||"-ms-device-fixed"===t}for(;t;){if(t==document.body)return!1;if(t.style.position)return n(t.style.position);if(t.currentStyle&&n(t.currentStyle.position))return!0;if(window.getComputedStyle&&n(getComputedStyle(t).getPropertyValue("position")))return!0;t=t.parentNode}return!1}var a={};if(a.above=i(function(t,e,o,r,i,u){return r.left+o.x/2-t.x/2-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-t.y-e.y-(u?n.scrollTop():0)}),a.below=i(function(t,e,o,r,i,u){return r.left+o.x/2-t.x/2-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.bottomRight=i(function(t,e,o,r,i,u){return r.left-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.bottomLeft=i(null,function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)},function(t,e,o,r,i,u){return i.x-(r.left+o.x)+(u?n.scrollLeft():0)}),a.left=i(function(t,e,o,r,i,u){return r.left-t.x-e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.leftTop=i(function(t,e,o,r,i,u){return r.left-t.x-e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-(u?n.scrollTop():0)}),a.overlapLeftTop=i(function(t,e,o,r,i,u){return r.left+o.x-t.x-e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-(u?n.scrollTop():0)}),a.right=i(function(t,e,o,r,i,u){return r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.rightTop=i(function(t,e,o,r,i,u){return r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-(u?n.scrollTop():0)}),a.overlapRightTop=i(function(t,e,o,r,i,u){return r.left+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-(u?n.scrollTop():0)}),a.on=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.wideside=i(function(t,e,o,r,i,u){return r.left>i.x-r.left-o.x?r.left-t.x-e.x-(u?n.scrollLeft():0):r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.center=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return i.y/2-t.y/2+(u?0:n.scrollTop())}),a.centerBelow=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.topCenter=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,n,e,o,r,i){return 0}),a.topLeft=i(null,function(t,e,o,r,i,u){return r.top-t.y-e.y-(u?n.scrollTop():0)},function(t,e,o,r,i,u){return i.x-(r.left+o.x)+(u?n.scrollLeft():0)}),a.movingCenter=u(!0,!0),a.movingCenterX=u(!0,!1),a.movingCenterY=u(!1,!0),a.cssCentered=l(),a.absolute=i(function(){return 0},function(){return 0}),a.framed=i(function(){return 0},function(){return 0},function(){return 0},function(){return 0}),a.offScreen=i(function(){return-1e4},function(){return-1e4}),a.noop=function(){return function(){}},a.rightEvenInRtl=a.right,a.leftEvenInRtl=a.left,"undefined"!=typeof document&&n.hasClass(document.body,"rtl")){a.left=a.rightEvenInRtl,a.right=a.leftEvenInRtl;var p=a.bottomRight;a.bottomRight=a.bottomLeft,a.bottomLeft=p,p=a.rightTop,a.rightTop=a.leftTop,a.leftTop=p,p=a.overlapRightTop,a.overlapRightTop=a.overlapLeftTop,a.overlapLeftTop=p}return a});
define("overlays/options/matchWidth",["vanillajs","api-mod"],function(t,i){"use strict";var n=function(t){function n(){this.container&&t&&(i.setStyle(this.container,"width",i.getSize(t).x+"px"),this.emit("positionDirty"))}return function(){this.on("show",i.bind(n,this))}};return n});
define("overlays/options/closeOnDocClick",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.sourceElement&&e.containsElement(this.sourceElement,t.target)||e.containsElement(this.container,t.target)||t.target&&("option"===t.target.tagName||e.hasClass(t.target,"ui_dropdown")||e.getParent(t.target,"ui_dropdown"))||e.checkBrowser("ie")&&t.target&&"select"==t.target.tagName&&e.containsEvent(t.target,t)&&e.select(this.container,"input").indexOf(t.target)||this.hide("doc-click")}function i(t){return function(){var i=e.bind(n,this);this.on("show",function(){setTimeout(function(){this.isOpen()&&(e.addEvent(document,"click",i),t&&e.addEvent(document,"touchstart",i))}.bind(this),1)}).on("hide",function(){e.removeEvent(document,"click",i),t&&e.removeEvent(document,"touchstart",i)})}}var o=i(!0);return o.withoutTouchEvents=i(!1),o});
define("overlays/options/autoReposition",["vanillajs","overlays/options/repositionOnEvent"],function(o,n){return n(window,["resize","scroll"])});
define("overlays/options/fade",["lib/jquery-amd"],function(t){"use strict";function i(i){t(this.container).addClass(i),t(this.shade).addClass(i)}function n(i){t(this.container).removeClass(i),t(this.shade).removeClass(i)}var l=function(){},s="fade_in",a="fade_out",o=[function(t){i.call(this,t.cl)},function(t){i.call(this,s)},l,function(t){n.call(this,s)},l],c=[l,function(t){i.call(this,t.cl),i.call(this,s)},function(t){n.call(this,t.cl),n.call(this,s)},l,l],e=[l,l,l,function(t){i.call(this,t.out),i.call(this,a)},function(t){n.call(this,t.out),n.call(this,a)}],h=function(t,i,n){return function(){if(t){i=i!==!1,n=n!==!1;var l=this.show,s=this.hide,a=i&&n?o:i?c:e;a[0].call(this,t),i&&(this.show=function(){var i=arguments;l&&l.apply(this,i),a[1].call(this,t),setTimeout(function(){a[2].call(this,t)}.bind(this),t.len)}.bind(this)),n&&(this.hide=function(){var i=arguments;a[3].call(this,t),setTimeout(function(){a[4].call(this,t),s&&s.apply(this,i)}.bind(this),t.len)}.bind(this))}}};return h.NONE={cl:"fade_none",out:"fade_out_none",len:0},h.SHORT={cl:"fade_short",out:"fade_out_short",len:250},h.NORMAL={cl:"fade_normal",out:"fade_out_normal",len:500},h.LONG={cl:"fade_long",out:"fade_out_long",len:1e3},h});
define("overlays/options/closeOnScroll",["vanillajs","api-mod"],function(n,o){"use strict";var i=function(){this.on("show",function(){o.addEvent(window,"scroll",this.hide)}).on("hide",function(){o.removeEvent(window,"scroll",this.hide)})};return i});
define("overlays/options/centerArrowOnSrcElement",["vanillajs","api-mod"],function(t,i){"use strict";var o=function(t){function o(){if(t=t||this.sourceElement,this.container&&t&&this.arrow){var o=i.getCoords(this.container),r=i.getCoords(t),n=i.hasClass(this.container,"arrow_top")||i.hasClass(this.container,"arrow_bottom");if(n){var s=r.left+r.width/2,e=i.getSize(this.arrow).x/2,a=Math.max(e,Math.min(o.width-e,s-o.left));i.setStyle(this.arrow,{"left":a+"px","right":"auto","margin":"0 0 0 -"+e+"px"})}else{var s=r.top+r.height/2,e=i.getSize(this.arrow).y/2,h=Math.max(e,Math.min(o.height-e,s-o.top));i.setStyle(this.arrow,{"top":h+"px","bottom":"auto","margin":"-"+e+"px 0 0 0"})}}}return function(){this.on("show",i.bind(o,this)),this.on("positionDirty",i.bind(o,this)),this.on("repositionArrow",i.bind(o,this))}};return o});

define("overlays/options/repositionOnTaEvent",["vanillajs","ta/Core/TA.Event"],function(n,i){"use strict";return function(n){return function(){var t=this.emit.bind(this,"positionDirty");this.on("show",function(){i.on(n,t)}).on("hide",function(){i.off(n,t)})}}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"brand_login_callout","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","ta/Core/TA.LocalStorage","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","page-model","overlays/options/repositionOnTaEvent"],function(e,o,n,t,a,r,i,l,s,c,d,u,v,p,g,f){"use strict";var y,_=o(".core-login-button",".global-nav-profile"),m=o(".brand-login-test"),b=o(".brand-text",m),h=o("#brandLoginContainer"),w=g.session.pageServlet,O=g.GEO_ID,C=function(){return o(".ui_notification_container").length||o(".ui_overlay").length},k=function(){m.on("click",".ui_close_x",function(){y&&y.destroy()&&(y=null)}),y=new r(_.parent()[0],new i(m[0],"brand-callout ui_popover"),l.bottomLeft([-10,1]),d,p(_),c,s,v,f("showingCookieConsentBanner"),u(u.LONG,!1,!0)),y.show(),o("#brandLoginPopover").removeClass("hidden")},E=function(e,o){if(!require("page-model").session.loggedIn)return e&&k(),a.set(o,!0),void n.trackEventOnPage(o,"view","servletname_"+w)},S=function(){if(!C()){var e=h.attr("data-tracking-property")||"",o=m.length>0;a.has(e)||E(o,e)}},A=function(e){y&&y.destroy()&&(y=null),n.trackEventOnPage("pcb_campaign_callout_login","click","servletname_"+w,0,window.location.href),require("ta/registration/RegOverlay").show(e,e.target,{flow:"BRAND_SIGNUP_CORE_COMBINED",pid:40197,locationId:O}),e.preventDefault()};o(document).on("regUpdateMember",function(){h.length>0&&n.setEvtCookie("pcb_campaign_callout_Success","view","servletname_"+w,0,window.location.href)}),b.on("click",function(e){A(e)}),a.enabled&&("complete"===document.readyState?S():o(window).ready(S()))})});
define("ta/Core/TA.FireEvent",["vanillajs"],function(){var n={},e={};return n.on=function(n,t){var r=e[n];r||(r=e[n]=[]),r.push(t)},n.fireEvent=function(n,t){var r=Array.prototype.slice.call(arguments),i=e[n];r.shift(),i&&i.slice(0).forEach(function(n){try{n.apply(null,r)}catch(n){}})},n.off=function(n,t){if(t){var r,i=e[n];i instanceof Array&&(r=i.indexOf(t),r>=0&&i.splice(r,1))}else delete e[n]},n.hasEventListener=function(n){return!!e[n]},n});
define("utils/urlDecoder",["utils/decoder"],function(e){function t(t){if(!t)return null;var n=4;return t=e.base64Decoder(t),t=t.substring(n,t.length-n)}function n(e){return e.getAttribute("href")||t(e.getAttribute("data-params"))}function r(e,n,r,o){new Event(e).preventDefault();var u=n.getAttribute("data-params");return!!u&&(!!(u=t(u))&&(r&&(u+=r),o?window.open(u,"_blank"):window.location=u,!1))}function o(e){if(!u(e))return e;var n=e.substring(c,e.length);return t(n)}function u(e){return e&&"string"==typeof e&&0==e.indexOf(d)&&e.length>c}function i(e){var t=/TAP\|.+?(?=%2F)/.exec(e),n=t[0],r=o(n),u=e.replace(n,r);window.open(u)}var d="TAP|",c=d.length;return{decodeUrl:t,getUrl:n,goToLink:r,decodeProductCode:o,isObfuscatedProductCode:u,goToCommerceLinkWithProductCode:i}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"trip_planner_breadcrumbs","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/urlDecoder"],function(e,n,i){"use strict";function r(n){var i=document.getElementById(e.id);i&&(i.innerHTML=n.innerHTML)}function t(e,n){i.goToLink(e,n)}function o(e,n){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,n)}return n.on("update-"+e.name,r),{goToLink:t,onClick:o}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_footer_pickers","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(e,t,o){"use strict";function a(t,o,a,r){t&&t.stopPropagation(),o.onclick=null,e.require(["trjs!styleguide/overlays/Flyout","trjs!overlays/support/widgets","trjs!overlays/support/remoteWidget","trcss!src/build/styleguide/ui_overlays/flyouts"],function(n,s,i){n(t,o,s(e),i(a,{},r))})}return{showPos:function(r,n){var s=t(e.element).find(".point_of_sale_data");a(r,n,"POS_PICKER",{pageFeature:s.data("page-feature")||window.pageFeature||"",localeCodes:s.data("locale-codes")||window.localeCodes||"",relativeUrl:document.location.pathname+(document.location.search||"")+(document.location.hash||"")});var i=s.data("currentLocale");o.trackEventOnPage("POS_PICKER","Open",i)},showCurrency:function(e,t){a(e,t,"CURRENCY_PICKER")}}})});
define("ta/util/ActionRecord",["vanillajs","ta/util/Deferred","utils/ajax","ns-exporter","ta/Core/TA.Record"],function(r,t,e,o,n){function a(r,o,a,i){var c=new t;a||(a={});var u={url:a.url||r,method:a.method||"get",data:{action:o},success:function(r){a.onSuccess&&a.onSuccess(r),c.resolve(r)},error:function(r){a.onFailure&&a.onFailure(r),c.reject(r)}};for(var d in a)if(a.hasOwnProperty(d)&&!u.hasOwnProperty(d))u[d]=a[d];else if("data"==d)for(d in a.data)a.data.hasOwnProperty(d)&&(u.data[d]=a.data[d]);if(i){var s=n._toEvtParams(i);for(d in s)s.hasOwnProperty(d)&&(u.data[d]=s[d])}return e(u),i&&n._trackEventAfterAjax(i),c.promise()}var i={record:function(r,t,e){return a("/ActionRecord",r,t,e)},recordPlus:function(r,t,e){return a("/ActionRecordPlus",r,t,e)},recordPid:function(r){new e("/ActionRecord?pid="+r)}};return o.exportTo(i,"ta.util.action"),i});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_partner_footer_links","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,n,t){"use strict";n(e.element).on("click",".inlineLink",function(){var e=n(this).parent(".footerLink").data("trackAction");e&&t.record("Footer"+e)})})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_social_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,t,i){"use strict";t(e.element).on("click",".footerLink",function(){var e=t(this).data("trackAction");e&&i.record("Footer_"+e)})})});
define("ta/util/Cookie",["vanillajs","ns-exporter"],function(e,o){var t=0,n=5e3,i={cookiePIDName:"NPID",ONE_DAY:864e5,ONE_HOUR:36e5,setPIDCookie:function(e){i.write(i.cookiePIDName,e,n,"/",window.cookieDomain)},removePIDCookie:function(){try{i.write(i.cookiePIDName,"",t,"/",window.cookieDomain)}catch(e){}},canSet:function(){return document.cookie="SessionTest=true",!!document.cookie.match("(^|;)\\s*SessionTest=true\\s*(;|$)")&&(document.cookie="SessionTest=; expires=Thu, 01 Jan 1970 00:00:01 GMT",!0)},readRaw:function(e){e=e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");var o=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]*)"));return!!o&&o[1]},remove:function(e,o,t){i.write(e,"",new Date(1e3),o,t)},write:function(e,o,t,n,i){"number"==typeof t&&(t=new Date(Date.now()+t)),document.cookie=e+"="+o+(t?"; expires="+t.toUTCString():"")+(n?"; path="+n:"")+(i?"; domain="+i:"")},setOneTimeCookieOnFQDN:function(e,o){return i.write(e,o,5e3),!0},setOneTimeCookie:function(e,o){return i.write(e,o,5e3,null,window.cookieDomain),!0}};return o.exportTo({setPID:i.setPIDCookie}),o.createNs(i,"ta.util","cookie"),i});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"homepage_tripadvisor_footer_links","handlers",["handlers"]);e(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(t,e,r,i){"use strict";function n(t){var e=t?t.srcElement||t.target:null;e&&e.getAttribute("data-pid")&&r.setPIDCookie(e.getAttribute("data-pid"))}return e(t.element).on("click",'.js_click[data-id="help_center"]',function(){var r=this,i=e(r).data("url");t.require(["trjs!brand/HelpCenterOverlay","trcss!src/build/required/help_center_overlay"],function(t){t.open(r,i)})}),e(t.element).on("click",".footerLink",function(t){var r="Footer_",n=e(this),a=n.data("trackAction");if(a){var o="_blank"==n.attr("target");n.is("a")&&!o?(t.preventDefault(),i.record(r+a).always(function(){window.location=n.attr("href")})):i.record(r+a)}}),{checkForPid:n}})});
define("ta/popups/CookieSettingsPanel",["ta/util/openNewTab","page-model"],function(e,n){return function(s){s&&s.stop();var o={en:451,en_UK:834,en_IE:835,en_ZA:2635,sv:720,no:721,da:1199,fr:1197,fr_BE:6409,fr_CH:6410,de:1201,de_AT:2719,de_CH:6431,el:1198,it:1202,it_CH:6432,es:1200,pl:1208,nl:1209,nl_BE:6411,fi:2968,hu:3049,cs:3128,sk:3233,pt_PT:13938,"default":451},i={en:8328,en_UK:8328,en_IE:8316,en_ZA:8324,sv:8322,no:8323,da:8310,fr:8312,fr_BE:8307,fr_CH:8326,de:8313,de_AT:8306,de_CH:8325,el:8314,it:8317,it_CH:8327,es:8321,pl:8319,nl:8318,nl_BE:8309,fi:8311,hu:8315,cs:8308,sk:8320,pt_PT:13939,"default":8328},t=n.isMobile?i:o,_=n.session&&n.session.posLocale&&t[n.session.posLocale]?t[n.session.posLocale]:t["default"],l="http://info.evidon.com/pub_info/"+_+"?v=1&nt=0";e(l)}});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_tripadvisor_horizontal_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/popups/CookieSettingsPanel","ta/util/ActionRecord"],function(e,t,i,o){"use strict";t(e.element).on("click",'.js_click[data-id="cookie-consent"]',function(){i()}),t(e.element).on("click",".footer_link",function(e){var i=t(this),n="Footer_",r=i.data("trackAction");r&&(i.is("a")&&(e.preventDefault(),o.record(n+r).always(function(){window.location=i[0].href})),o.record(n+r))})})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_pos_picker","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(e,n,i,t){"use strict";function o(i){var o=n(i).data("id"),r=n(e.element).find(".picker_dropdown").data("currentLocale");t.record("POS_PICKER_SELECT_POS_"+o+"_FROM_"+r).always(function(){window.location=i.href})}function r(){i.remove("TAPD","/",window.domain)}var a=n(".fixed_header",n(e.element));n(e.element).before(a);var d=n(e.element).find(".pos_item.selected")[0];d&&d.scrollIntoView(),n(e.element).on("click",".pos_link",function(e){e.preventDefault(),r(),o(this)})})});
define("ta/util/Currency",["vanillajs","ta/util/Cookie","common/trackingStreams","ns-exporter"],function(r,n,t,e){var o={},a="‏",i="؜",u=" ",c="‎";return o.formatCurrency=function(r,n,t,e){var a=n?n:"USD",i=window.currencySymbol[a],f=r;e||(f=o.formatThousands(Math.round(r)));var s=i[0],l=i[1],y=document.body.classList;return y.contains("lang_ar")?o.isCurrencyAbbreviation(s)?f+u+s+c:s+c+u+f:t?l?f+u+s:s+u+f:l?f+s:s+f},o.formatCurrencyRange=function(r,n,t,e){var c,f=document.body.classList;return c=f.contains("lang_ar")?u+"-"+i+u:ta.util.i18n.isRtl()?u+"-"+a+u:u+"-"+u,e?(r=o.formatCurrency(r,t,!0),n=o.formatCurrency(n,t,!0),r+c+n):(r=o.formatCurrency(r,t),n=o.formatCurrency(n,t),r+c+n)},o.isCurrencyAbbreviation=function(r){return/^[a-zA-Z]+[^a-zA-Z0-9]?$/i.test(r)},o.formatThousands=function(r){if("undefined"==typeof groupingSize||"undefined"==typeof groupingSeparator||groupingSize<1)return r;for(var n="",t=""+r,e=1;e<=t.length;e++)n=t.charAt(t.length-e)+n,e%groupingSize==0&&e<t.length&&(n=groupingSeparator+n);return n},o.setCurrencyAndReload=function(r,e){var o="SetCurrency";n.write(o,r,15e3),e=e?e+"|":"",t.trackEvent("CurrencyPicker","Select",e+r),location.reload(!0)},e.exportTo(o,"ta.util.currency"),o});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"homepage_currency_picker","handlers",["handlers"]);r(["widget","lib/jquery-amd","ta/util/Currency"],function(e,r,n){"use strict";function t(t){var d=r(e.element).find(".picker_dropdown").data("currentCurrency");n.setCurrencyAndReload(t,d)}var d=r(".fixed_header",r(e.element));return r(e.element).before(d),{setCurrencyAndReload:t}})});
define("vanillajs",[],function(){return{}});
define("utils/ajax",["lib/jquery-amd","ta/Core/TA.Record","utils/form-to-json"],function(e,t,i){function n(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}return function(r,a){r.substr||(a=r);var s=e.extend({},a,{dataFilter:function(e,t){return"json"==t&&(e=e.replace(/^\s*while\s*\([^)]*\);?/,"")),a&&a.dataFilter&&a.dataFilter.call(this,e,t),e}});s.xhrFields=s.xhrFields||{},s.xhrFields.withCredentials=!0,n(s.data)&&(s.data=i(s.data));var c=s.trackEvent;return c&&(e.extend(s,t._toEvtParams(c)),s.complete=function(){t._trackEventAfterAjax(c),a&&a.complete&&a.complete.apply(this,arguments)}),s.evalScripts&&(s.success=function(t,i,n){if(t&&t.substr){var r,s;e.parseHTML?(r=e(e.parseHTML(t,document,!0)),s=r.filter("script").add(r.find("script"))):(r=e("<div>"+t+"</div>"),s=r.find("script")),s.each(function(e,t){if(t.innerHTML)if(window.execScript)window.execScript(t.innerHTML);else if(window.eval)window.eval(t.innerHTML);else{var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.text=t.innerHTML,document.head.appendChild(i),document.head.removeChild(i)}})}a&&a.success&&a.success.apply(this,arguments)}),r.substr?e.ajax(r,s):e.ajax(s)}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_footer","handlers",["handlers"]);n(["placement","vanillajs","utils/ajax"],function(e,n,t){function a(){var n=window.location.pathname,t=n.indexOf("-"),a=n.length<=1?"Home":t>0?n.substring(1,t):n.substring(1);require(["trjs!ta/util/Element"],function(n){ta.util.element.trackWhenScrolledIntoView("#"+e.id,[a,"in_view","global_footer"])})}return a(),{getFullDisclaimerText:function(e){t({url:"/TAMGFooterAjax",success:function(n){e.parentElement&&(e.parentElement.innerHTML=n)},data:{"a":"SHOW_FULL_DISCLAIMER"},evalScripts:!0,method:"get"})}}})});
define("common/Radio",["babel/babel-helpers"],function(e){var t={},n=/\s+/,r=function(){function t(n){e.classCallCheck(this,t),this.channel=n,this.events={},this.replies={}}return e.createClass(t,[{key:"reply",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.replies[e]||(i.replies[e]=[]),i.replies[e].push({callback:t,context:r||i})},this),this}},{key:"request",value:function(e){if(!this.replies[e])return null;var t=this.replies[e];t=t[t.length-1];for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.callback.apply(t.context,r)}},{key:"requestMany",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.replies[e]?this.replies[e].map(function(e){return e.callback.apply(e.context,n)}):null}},{key:"requestAll",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];if(!this.replies[t])return!0;i=[n].concat(e.toConsumableArray(i));var s="function"==typeof n?n:function(e){return e===n};return this.replies[t].reduce(function(e,t){return e&&s(t.callback.apply(t.context,i))},!0)}},{key:"requestAny",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];if(!this.replies[t])return!1;i=[n].concat(e.toConsumableArray(i));var s="function"==typeof n?n:function(e){return e===n};return this.replies[t].reduce(function(e,t){return e||s(t.callback.apply(t.context,i))},!1)}},{key:"on",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.events[e]||(i.events[e]=[]),i.events[e].push({callback:t,context:r||i})}),this}},{key:"once",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.events[e]||(i.events[e]=[]),i.events[e].push({callback:t,context:r||i,single:!0})}),this}},{key:"off",value:function(e,t){var r=this;return e.split(n).forEach(function(e){r.events[e]&&(r.events[e]=r.events[e].filter(function(e){return t&&e.callback!==t}))}),this}},{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.events[e])return this.events[e]=this.events[e].filter(function(e){return e.callback.apply(e.callback,n),!e.single}),this}},{key:"clear",value:function(){return this.events={},this.replies={},this}},{key:"requestEvery",get:function(){return this.requestAll}},{key:"requestSome",get:function(){return this.requestAny}},{key:"one",get:function(){return this.once}},{key:"emit",get:function(){return this.trigger}}]),t}();return function(e){return t[e]||(t[e]=new r(e))}});
define("ta/registration/RegEvents",["mixins/Events"],function(e){return new e("success")});
define("utils/throttle",[],function(){return function(t,n){var e,r;return function(){r&&(clearTimeout(r),r=0);var i=e?n-(Date.now()-e):null;if(null!==i&&i>0)return void(r=setTimeout(t.apply.bind(t,this,arguments),i));var u=t.apply(this,arguments);return e=Date.now(),u}}});
define("widget/components",["babel/babel-helpers"],function(e){var t={};return t.initComponentWidgets=function(e,o){var n=t.getComponentWidgets(e,o);return 0===n.length?n:(require(["babel/babel-helpers","@ta/platform.runtime"],function(e,t){n.forEach(function(e){var o=e.getAttribute("data-component"),n=e.id,r=e.getAttribute("data-component-props"),i="page-manifest"===r?t.pageManifestComponents[n]:JSON.parse(r);t.importBundle(o).then(function(){try{t.createRoot(n,o,i)}catch(e){}})})}),n)},t.getComponentWidgets=function(t,o){var n=t&&t.querySelectorAll(".component-widget[data-component"+(o?"='"+o+"'":"")+"]");return n?[].concat(e.toConsumableArray(n)):[]},t.contains=function(e,o,n){var r=t.getComponentWidgets(o||document.body,n);return r.some(function(t){return t.contains(e)})},t.termsOfUseGate=function(){return new Promise(function(e){require(["babel/babel-helpers","@ta/platform.runtime","redux-init"],function(t,o,n){if(!n.getState().auth.loggedInUserId)return e();var r="@ta/social.terms-of-use-gate";o.importBundle(r).then(function(){if(!document||!document.body)return e("Document or document body is not defined");var t=document.createElement("div");t.id=r,document.body.appendChild(t),o.createRoot(t.id,r,{onComplete:function(){o.destroyRoot(t.id),t.remove(),e()},onClose:function(n){n.trigger&&(o.destroyRoot(t.id),t.remove(),e("User has exited the gate without completing"))}})})})})},t.loadOverlayComponent=function(e){return new Promise(function(t){return require(["babel/babel-helpers","@ta/platform.runtime"],function(o,n){n.importBundle(e).then(function(){var r=document.createElement("div"),i=Math.random(),a=e+":"+i;r.id=a,document.body.appendChild(r);var u=function(t){[].concat(o.toConsumableArray(document.querySelectorAll(".ui_overlay"))).forEach(function(e){e.remove()}),n.createRoot(a,e,t)},d=function(){n.destroyRoot(a),r.remove()};t({createRoot:u,destroyRoot:d})})})})},t.socialGate=function(e,t){return new Promise(function(o){require(["babel/babel-helpers","@ta/platform.runtime"],function(n,r){var i="@ta/social.immediate-login-gate";r.importBundle(i).then(function(){if(!document||!document.body)return o("Document or document body is not defined");var n=document.createElement("div");n.id=i,document.body.appendChild(n),r.createRoot(n.id,i,{flowOrigin:t,onComplete:function(){return r.destroyRoot(n.id),n.remove(),o()},onClose:function(e){if(e.trigger)return r.destroyRoot(n.id),n.remove(),o("User has exited the gate without completing")},pid:e})})})})},t});
define("utils/asdf-encoder",["ns-exporter","vanillajs"],function(e){"use strict";var t={};return t.getOffset=function(e){return e>=97&&e<=122?e-61:e>=65&&e<=90?e-55:e>=48&&e<=71?e-48:-1},t.asdf=function(e){for(var t={"":["&","=","p","6","?","H","%","B",".com","k","9",".html","n","M","r","www.","h","b","t","a","0","/","d","O","j","http://","_","L","i","f","1","e","-","2",".","N","m","A","l","4","R","C","y","S","o","+","7","I","3","c","5","u",0,"T","v","s","w","8","P",0,"g",0],"q":[0,"__3F__",0,"Photos",0,"https://",".edu","*","Y",">",0,0,0,0,0,0,"`","__2D__","X","<","slot",0,"ShowUrl","Owners",0,"[","q",0,"MemberProfile",0,"ShowUserReviews",'"',"Hotel",0,0,"Expedia","Vacation","Discount",0,"UserReview","Thumbnail",0,"__2F__","Inspiration","V","Map",":","@",0,"F","help",0,0,"Rental",0,"Picture",0,0,0,"hotels",0,"ftp://"],"x":[0,0,"J",0,0,"Z",0,0,0,";",0,"Text",0,"(","x","GenericAds","U",0,"careers",0,0,0,"D",0,"members","Search",0,0,0,"Post",0,0,0,"Q",0,"$",0,"K",0,"W",0,"Reviews",0,",","__2E__",0,0,0,0,0,0,0,"{","}",0,"Cheap",")",0,0,0,"#",".org"],"z":[0,"Hotels",0,0,"Icon",0,0,0,0,".net",0,0,"z",0,0,"pages",0,"geo",0,0,0,"cnt","~",0,0,"]","|",0,"tripadvisor","Images","BookingBuddy",0,"Commerce",0,0,"partnerKey",0,"area",0,"Deals","from","\\",0,"urlKey",0,"'",0,"WeatherUnderground",0,"MemberSign","Maps",0,"matchID","Packages","E","Amenities","Travel",".htm",0,"!","^","G"]},r="",a=0;a<e.length;a++){var n=e.charAt(a),o=n;t[n]&&a+1<e.length?(a++,o+=e.charAt(a)):n="";var s=getOffset(e.charCodeAt(a));r+=s<0||"String"==typeof t[n][s]?o:t[n][s]}return r},e.exportTo(t),t});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio","ta/registration/RegEvents","utils/throttle","widget/components","utils/asdf-encoder"],function(e,o,n,t,a,i,r){"use strict";function s(){var e=o(window).scrollTop();if(b.length&&w.is(":visible")){var n=v.height()-e;e<=0&&b.css({"position":"absolute","top":0}),n>0&&(e>0&&e<=50?b.css({"position":"absolute","top":e,"bottom":"auto"}):n<=50&&b.css({"position":"absolute","top":"auto","bottom":0}))}}function l(){var e=o(".second-view",v),n=o(window).scrollTop();b.length&&(y.css({"display":"block"}),e.length&&w.is(":visible")&&(n=p.height()-y.height(),window.scroll(0,n),b.css({"position":"absolute","top":"auto","bottom":0})))}function c(){var e=o(".global-nav-persistent",v);e.length&&e.toggleClass("fixed",o(window).scrollTop()>v.offset().top)}function d(e,o){e.preventDefault();var n=o.getAttribute("data-ahref")?r.asdf(o.getAttribute("data-ahref")).replace(/&amp;/g,"&"):"/";window.open(n,"_self")}var u="TopNav",v=o("#"+e.id),f=n("global-nav"),g=null,h=null,p=o(".persistent-icons",v),b=o(".global-nav-icons",p),y=o(".global-nav-logo",p),m=o(".global-nav-logo-2018",v),w=o('[data-placement-name="global_nav_geopill"]',v),j=n("candy-bar-quick-links"),C=o(".global-nav-bottom",v),k=n("tripsearch-scroll-geo-pill");f.on("run-my-trips-test-3",function(){T(!1,!0)}),k.on("hide-on-header",function(e){m&&m.toggleClass("is-hidden-mobile",!e)});var _=function(e){window.userLoggedIn=!0;var t=0==v.find("[data-non-components]").length;if(t){var a=v.find(".components-nav-legacy-actions"),r=o("<div>").html(e).find(".components-nav-legacy-actions").html();a.html(r)}else{var s=o("<div>").append(v.find(".global-nav-no-refresh"));v.html(e),v.find(".global-nav-no-refresh").each(function(e,n){o(n).replaceWith(s.find("#"+n.getAttribute("id"))[0])}),g&&g.hide("replace-el")}v[0]&&i.initComponentWidgets(v[0],"@ta/trips.trip-link"),n("inbox").trigger("setup_handler")}.bind(v),O=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};t.on("success",function(){e.requestAJAXPlacement(_,null,O())}),v.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();g&&g.hide("new-overlay");var a=v.find(n.data("element")).clone();if(a.length){var i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(i,function(i,r,s,l,c){var d=new i(n[0],new r(a[0],"global-nav-flyout global-nav-menu"),s,l.bottomRight([0,1]),c);d.domParent=v.find(".global-nav-overlays-container")[0],d.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),d.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),g=d})}}),v.on("mouseenter",".subItem",function(e){o(this).siblings(".expandSubItem").removeClass("active")}),v.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(i,function(e,o,i,r){var s=new e(n[0],new o(t[0]),i,r);s.domParent=a[0],t.css("display","block"),s.show()})}}),v.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);g&&g.hide("new-overlay");var t=v.find(".global-nav-links-container li"),a=t.filter(":hidden"),i=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),r=o().add(a).add(i).clone(),s=v.find(".global-nav-links-menu-more").clone();s.prepend(r);var l=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(l,function(e,o,t,a,i){var r=new e(n[0],new o(s[0],"global-nav-flyout global-nav-menu"),t,a.bottomRight([0,1]),i);r.domParent=v.find(".global-nav-overlays-container")[0],r.show(),n.find(".ui_tab").addClass("hovering"),r.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),g=r})}),v.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,i,r,s){var l=new e(o,[n(null,"","help_center"),t,a.cssCentered(),i,r("/uvpages/helpCenterOverlay.html")]);l.show(),f.emit("overlay-show")})}),v.on("click",".masthead-saves",function(e){h?(g&&g.hide("new-overlay"),h&&h.destroy()&&(h=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(T(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var T=function(e,n,t){g&&g.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,i,r,s,l,c,d){var u=o(".masthead-saves"),f=new a(u[0],new i("","global-nav-flyout global-nav-utility trips-flyout-container"),r.withoutTouchEvents,u.data("nav-2018-enabled")?s.bottomLeft([u.width()/2-34,9]):s.bottomLeft([-20,-3]),l,c);f.domParent=v.find(".global-nav-overlays-container")[0],f.show(),v.find(".trips-flyout-container").addClass("hide-arrow"),g=f,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,i,r){setTimeout(function(){h=new window.MastheadSavesApp,h.start({inCreateTripFlow:e,runTest3:n}),f.on("hide",function(e){h&&h.destroy()&&(h=null),d.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),v.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(v);v.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=v.find(n.data("element")).clone();if(t.length){if(g){if(g.sourceElement==this)return void(g.isOpen()?g.hide("close"):g.show());g.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,i,r,s,l){var c=new a(n[0],new i(t[0],"global-nav-flyout global-nav-utility"),r,n.data("nav-2018-enabled")?s.bottomLeft([n.outerWidth()/2-34,12]):s.bottomLeft([-20,-3]),l);c.domParent=v.find(".global-nav-overlays-container")[0],c.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),c.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),g=c})}}),v.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),n("inbox").on("has_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").removeClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").removeClass("hidden")}),n("inbox").on("no_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").addClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").addClass("hidden")}),v.on("click","a.login-button.mobile",function(e){var n="CORE_COMBINED",t=40422,a="login";o(this).hasClass("join-button")&&(a="join");var i={flow:n,pid:t,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){if(require("@ta/social.onboarding-state")){var o=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse),n=require("@ta/social.onboarding-state").ACTIONS.setShouldFire;require("redux-init").dispatch(n(o,"MASTHEAD"))}}},r={extraQueryParams:{flowOrigin:a}};i=o.extend(i,r),require("ta/registration/RegOverlay").showForMobile(e,e.target,i),e.preventDefault()}),l();var q=a(c,100);return o(window).scroll(function(){s(),q()}),j.on("border-top",function(e){C.toggleClass("home_ui_tabs",e)}),v.on("click","a.global-nav-link[data-tracking-label]",function(e){var n=o(e.target).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(o){"HelpDesk"===n||"_blank"==e.target.target?o.trackEventOnPage(u,"click",n):o.setEvtCookie(u,"click",n,0,e.target.href)})}),{checkForPersistentIcons:s,checkForPersistentGlobalNav:c,clickLogoLink:d}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
define("ta/util/CommonMessagingUtil",["lib/jquery-amd","ta/Core/TA.LocalStorage","ta/support/Qualtrics","ta/util/SessionStorage","ta/Core/TA.Event"],function(e,t,n,a,i){"use strict";function r(e){if(t.enabled){var n=t.get(e+D);return n?parseInt(n):0}return null}function s(e){if(t.enabled&&e){var n=e+D;t.set(n,r(e)+1)}}function o(e){if(t.enabled){var n=t.get(e+y);return n?parseInt(n):0}return 0}function u(e){if(t.enabled&&e){var n=e+y;t.set(n,o(e)+1)}}function l(e){if(t.enabled){var n=t.get(e+p);return!!n}return!1}function c(e){t.enabled&&e&&t.set(e+p,"true")}function d(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+S;t.set(a,n.toString())}}function f(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+S,i=t.get(a);return!!i&&i===n.toString()}return!1}function m(e){var n=(new Date).getDate();t.enabled&&t.set(e,n.toString())}function g(e){var n=(new Date).getDate();if(t.enabled){var a=t.get(e);return!!a&&a===n.toString()}}function b(e,t,r){e&&"function"==typeof e&&e()&&(n.seenThisPageView()||n.canDisplaySmart()||n.canDisplay())||t&&"function"==typeof t&&t()||r&&"function"==typeof r&&(document.getElementById("FIXED_AD")?a.canUseSessionStore()&&a.getObject("ads.fixed.close")?r():i.on("ad_div_collapsed",function(){r()}):r())}function v(e){return e.toLowerCase().replace("mobile","")}var D="_view_count",p="_is_disabled",y="_times_dismissed",S="_disabled_for_day";return{getCurrentPageViews:r,incrementPageViews:s,getNumberOfTimesDismissed:o,incrementNumberOfTimesDismissed:u,isPlacementDisabled:l,disablePlacement:c,setPlacementDisabledForToday:d,isPlacementDisabledForToday:f,setPlacementGroupKey:m,checkPlacementGroupKey:g,parseServletName:v,displayPlacementIfNoSurveyNorAdIsPresent:b}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_action_inbox","handlers",["handlers"]);n(["placement","vanillajs","lib/jquery-amd","common/Radio","ta/Core/TA.Record","ta/util/CommonMessagingUtil"],function(e,n,o,i,t,a){function s(e){if(e.receivedCallback&&e.receivedCallback(),o(".inbox-flyout-container").length&&g)g.destroy();else{var n=e.el,i=e.bottomLeftOffset;l(void 0,n,i)}}function r(e){l(e,o(".masthead-inbox-icon")[0])}function l(n,i,a){var s=o("#"+e.id),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","ta/registration/RegOverlay","trjs!unifiedinbox/inbox-lander","trcss!unified_inbox_lander"];require(r,function(e,r,l,c,d,v,_,b,f){var w=o(".inbox-nav-contents",s).clone()[0];if(w.classList.remove("hidden"),o(".login-cta",w).length){var p=o(".login-cta span",w);p.click(function(){n&&m&&(h=!0,t.trackEventOnPage("reg_trigger","mgp_click_login","Inbox Jewel Notification Log In Click | Nav | mgp_drs_mem",u)),g.destroy(),_.show({type:"dummy"},null,{flow:"CORE_COMBINED",pid:40472,userRequestedForce:!0,onSuccess:function(){o(".login-cta",s).remove(),o(".inbox-nav-dropdown",s).removeClass("with-login-cta")}.bind(this)})})}else for(var x,j=o(".js-inbox-lander-thread-list-item.loading",w),y=o(".inbox-masthead-wrapper",w),C=0;C<10;++C)x=j.clone(),x.removeClass("hidden"),y.append(x);var k=a;k||(k=o(i).data("nav-2018-enabled")?[o(i).width()/2-34,7]:[-20,-3]),g=new e(i,new r(w,"inbox-flyout-container"),l.withoutTouchEvents,c.bottomLeft(k),d,v),g.show(),n&&!n.hasClass("hidden")&&g.on("hide",function(){h||t.trackEventOnPage("reg_trigger","mgp_close","Inbox Jewel Notification | Nav | mgp_drs_mem",u),h=!1,m=!1}),o(".login-cta",s).length||b.loadMastheadDropdown()})}function c(e,n){if(n)if(n.hasClass("is-control"))t.trackEventOnPage("reg_trigger","mgp_view_control","Inbox Jewel Notification Control| Nav | mgp_drs_mem");else{var i=a.getCurrentPageViews(_);i>=b&&a.disablePlacement(_),a.isPlacementDisabledForToday(_)||a.isPlacementDisabled(_)||!n.hasClass("valid-for-test")||(o(".inbox-jewel-test",e).removeClass("hidden"),t.trackEventOnPage("reg_trigger","mgp_view","Inbox Jewel Notification | Nav | mgp_drs_mem",u))}}function d(){var n=o("#"+e.id),s=o(".inbox-jewel-test",n);c(n,s),o(".masthead-inbox-icon, .ui_jewel",n).click(function(e){e.stopPropagation(),s&&!s.hasClass("hidden")?(t.trackEventOnPage("reg_trigger","mgp_click","Inbox Jewel Notification | Nav | mgp_drs_mem",u),a.setPlacementDisabledForToday(_),a.incrementPageViews(_),m=!0,t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v)):o(".ui_jewel",n).length&&o(".ui_jewel",n).hasClass("hidden")?t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v):o(".ui_jewel",n).length&&t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","has_unread",v),o(".masthead-inbox-icon",n).attr("data-on-inbox")?window.location="/Inbox":o(".inbox-flyout-container").length&&g?g.destroy():r(s)}),i("inbox").on("thread_clicked",function(e){g&&g.destroy()}),i("inbox").on("has_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).removeClass("hidden")})}),i("inbox").on("no_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).addClass("hidden")})}),i("inbox").on("setup_handler",function(){d()})}var g,v=40186,u=40405,_="Membership_Inbox_Jewel_Test",b=3,m=!1,h=!1;return i("global-nav-inbox").on("open",function(e,n){s(e,n)}),d(),{}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);t(["placement","lib/jquery-amd","page-model"],function(e,t,a){"use strict";function r(){var e=t(".button_container").data("pageProperty1"),a=t(".button_container").data("pageProperty2"),r=t(".button_container").data("pageProperty3"),n=t(".button_container").data("pageProperty4");(e&&""!==e||a&&""!==a||r&&""!==r||n&&""!==n)&&require("ta/Core/TA.Record").trackEventOnPage(e,a,r,n)}function n(e){if(c.hasClass("core-login-button")){var t=c.data("isControl"),a=c.data("trackingPid"),r=c.data("joinAttr"),n="reg_trigger",o="mgp_";t&&r&&"view"===e&&(o="mgp_view_control",require("ta/Core/TA.Record").trackEventOnPage(n,o,r)),!t&&r&&a&&require("ta/Core/TA.Record").trackEventOnPage(n,o+e,r,a)}}var o=t("#"+e.id),i=null,c=t(".join-copy-tracking");n("view"),o.on("click","a.login-button",function(e){i&&i.hide("replace-el");var a=t(".core-login-button").data("flowName"),o=t(".core-login-button").data("pid"),c="login";t(this).hasClass("core-login-button")&&(c="join",t(this).hasClass("join-copy-tracking")&&n("click"));var l={flow:a,pid:o,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){if(require("@ta/social.onboarding-state")){var t=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse),a=require("@ta/social.onboarding-state").ACTIONS.setShouldFire;require("redux-init").dispatch(a(t,"MASTHEAD"))}}},d={extraQueryParams:{flowOrigin:c}};l=t.extend(l,d),require("ta/registration/RegOverlay").show(e,e.target,l),e.preventDefault(),r()});var l=function(e,a){var r=t(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(t){/\/#\s*$/.test(e.href)||"_blank"==e.target?t.trackEventOnPage(a,"click",r):t.setEvtCookie(a,"click",r,0,e.href)})};o.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){l(this,"UtilityNav")}),o.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(t){t.trackEventOnPage("UtilityNav","open",e)})})})});
define("api-mod",["lib/jquery-amd","utils/browserutils","utils/stopevent","utils/form-to-json","utils/to-array","utils/is-element"],function($,browser,stopEvent,formToJson,toArray,isElement){"use strict";var exports={};return exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=null;try{f=eval(fn)}catch(t){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(t){}}if(f&&"function"==typeof f)return f}return null},exports.bind=function(t,e){return Function.prototype.bind.apply(t,Array.prototype.slice.call(arguments,1))},exports.inDocument=function(t){return t=exports.find(t),!!t.parentNode&&11!==t.parentNode.nodeType},exports.addEvent=function(t,e,r){$(t).on(e,r)},exports.fireEvent=function(t,e,r){$(t).trigger(e,r)},exports.removeEvent=function(t,e,r){$(t).off(e,r)},exports.removePropertyEvent=function(t,e,r){"on"!==e.substr(0,2)&&(e="on"+e);var o=t.getAttribute(e);if(o){var n,s=r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");n=o.replace(new RegExp(s+"\\s*\\([^)]*\\);?|(ta\\.call|requireCallLast|requireCallIfReady)\\s*\\(\\s*['\"]\\s*"+s+"[^)]*\\);?"),""),t[e]=n.trim()}},exports.store=function(t,e,r){$(t).data(e,r)},exports.retrieve=function(t,e){return $(t).data(e)},exports.getSize=function(t){if(t=exports.find(t),!t)return null;if(/^(?:body|html)$/i.test(t.tagName)||t===window||t===document){var e=document.compatMode&&"CSS1Compat"!==document.compatMode?document.body:document.body.parentNode;return{x:e.clientWidth,y:e.clientHeight}}return{x:t.offsetWidth,y:t.offsetHeight}},exports.getPosition=function(t,e){if(e=$(e),t=$(t),e.length){var r=e.offset(),o=t.offset();return{left:o.left-r.left,top:o.top-r.top}}return t.offset()},exports.getCoords=function(t){if(t=exports.find(t),!t)return null;var e=this.getSize(t),r=this.getPosition(t);return{top:r.top,left:r.left,bottom:r.top+e.y,right:r.left+e.x,height:e.y,width:e.x}},exports.getOffsetParent=function(t){return $(t).offsetParent().get(0)},exports.getParent=function(t,e){if(t=exports.find(t),!t)return null;if(e){for(;t&&"html"!=t.tagName;t=t.parentNode)if(exports.hasClass(t,e))return t;return null}return t.parentNode},exports.elementOrParentMatches=function(t,e){if(e)for(;t;t=t.parentElement)if(e(t))return!0;return!1},exports.containsElement=function(t,e){if(t=exports.find(t),e=exports.find(e),!t||!e)return!1;for(;null!=e;){if(e===t)return!0;e=e.parentElement}return!1},exports.checkBrowser=function(t){var e=Array.prototype.slice.call(arguments);return e.some(function(t){return!!browser[t]})},exports.containsEvent=function(t,e){if(t=exports.find(t),!e||!t)return!1;var r=e.pageX,o=e.pageY,n=this.getCoords(t);return"fixed"!==$(this.getOffsetParent(t)||t).css("position")&&"undefined"!=typeof r&&"undefined"!=typeof o||(r=e.clientX,o=e.clientY),o>=n.top&&o<=n.bottom&&r>=n.left&&r<=n.right},exports.select=function(t,e){var r=Array.prototype.slice.call(arguments),o=r.length>1&&("string"==typeof r[0]?r.pop():r.shift())||document,n=r.shift();try{return $(n,o).get()}catch(t){return[]}},exports.addClass=function(t,e){$(t).addClass(e)},exports.removeClass=function(t,e){$(t).removeClass(e)},exports.toggleClass=function(t,e,r){$(t).toggleClass(e,r)},exports.hasClass=function(t,e){return t&&$(t).hasClass(e)},exports.destroy=function(t){$(t).remove().get()},exports.find=function(t,e){try{return $(t,e||document)[0]}catch(t){}},exports.scrollTop=function(){var t=void 0!==window.pageYOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop},exports.scrollLeft=function(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft},exports.createElement=function(t,e){var r=document.createElement(t);return e&&$(r).attr(e),r},exports.isElement=isElement,exports.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},exports.adopt=function(t,e){$(t).append(Array.prototype.slice.call(arguments,1))},exports.setStyle=function(t,e,r){$(t).css(e,r)},exports.stopEvent=stopEvent,exports.mixin=function(t,e){return Array.prototype.slice.call(arguments,1).forEach(function(e){for(var r in e)t[r]=e[r]},t),t},exports.merge=function(t,e){for(var r=Array.prototype.slice.call(arguments,1),o=0,n=r.length;o<n;o++)for(var s in r[o])r[o].hasOwnProperty(s)&&(t[s]=r[o][s]);return t},exports.getFormData=function(t){return formToJson($(t).get(0))},exports.toFormQueryString=function(t){var e=[];t&&"FORM"===t.nodeName&&(t=exports.getFormData(t));for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o&&"object"==typeof o)for(var n=0;o.length&&n<o.length;++n){var s=o[n];s="object"==typeof s?"":String(s),e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}else e.push(encodeURIComponent(r)+"="+encodeURIComponent(String(o)))}return e.join("&")},exports.toArray=toArray,exports.forceReflow=function(t){$(t).each(function(t,e){e.offsetWidth})},exports.stripTags=function(t,e,r){e=e||"";var o=r?"<"+e+"(?!\\w)[^>]*>([\\s\\S]*?)</"+e+"(?!\\w)>":"</?"+e+"([^>]+)?>";return t.replace(new RegExp(o,"gi"),"")},exports});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","ta/Core/TA.LocalStorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.getObject(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_links","handlers",["handlers"]);n(["utils/asdf-encoder"],function(e){function n(n,a){window.open(e.asdf(a.getAttribute("data-ahref")).replace(/&amp;/g,"&"),"_self")}return{clickAboutGeoLink:n}})});
define("ta/Core/TA.Store",["vanillajs","ns-exporter","ta/util/Object"],function(e,r,t){"use strict";var n={},a={};return a.store=function(e,r){return n[e]=r,r},a.retrieve=function(e){return n[e]},a.has=function(e){return"undefined"!=typeof n[e]},a.retrieveOrStore=function(e,r){var t=n[e];return"undefined"==typeof t&&(n[e]=r,t=r),t},a.remove=function(e){var r=n[e];return delete n[e],r},a.keep=function(e,r){var t,n=a.retrieve(e);t=n?n instanceof Array?n:[n]:[],r instanceof Array?r.forEach(function(e){t.contains(e)||t.push(e)}):t.push(r),a.store(e,t)},a.merge=function(e,r){a.store(e,t.merge(a.retrieve(e)||{},r))},a.asInt=function(e,r){var t=parseInt(a.retrieve(e));return isNaN(t)?r||0:t},a.asFloat=function(e,r){var t=parseFloat(a.retrieve(e));return isNaN(t)?r||0:t},a.executeCallbacks=function(e){if(a.has(e)){var r=a.retrieve(e);if(!r instanceof Array)return;for(var t=0;t<r.length;t++)r[t]()}},r.exportTo(a,"ta"),a});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);r(["placement","ta/Core/TA.Store","common/Radio"],function(e,r,a){function n(){if(e.params&&"typeahead_to_store"in e.params){var a=e.params.typeahead_to_store;if(a)for(var n in a)a.hasOwnProperty(n)&&r.store(n,a[n])}}n();var t=r.retrieve("typeahead_dual_search_options");return e.require(["trjs!deferred/lateHandlers"],function(e){a("masthead_search").on("open",function(){e.showSearchOverlay()})}),{getOptions:function(){return t}}})});
define("utils/IntlFormatter",["babel/babel-helpers"],function(e){return function(){function r(t,a){e.classCallCheck(this,r),this.locale=t,this.currency=a}return e.createClass(r,[{key:"formatNumber",value:function(e,r){switch(e){case"one":return new Intl.NumberFormat(this.locale,{minimumFractionDigits:1,maximumFractionDigits:1}).format(r);case"integer":return new Intl.NumberFormat(this.locale,{minimumFractionDigits:0,maximumFractionDigits:0}).format(r);default:return new Intl.NumberFormat(this.locale).format(r)}}},{key:"formatPercentage",value:function(e,r){switch(e){case"one":return new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(r);case"integer":return new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}).format(r);default:return new Intl.NumberFormat(this.locale,{style:"percent"}).format(r)}}},{key:"formatCurrency",value:function(e){return this.alternateCurrencyFormat(new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}).format(e))}},{key:"formatCurrencyInteger",value:function(e){return this.alternateCurrencyFormat(new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,minimumFractionDigits:0,maximumFractionDigits:0}).format(e))}},{key:"formatCurrencyISO",value:function(e){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:"name"}).format(e)}},{key:"formatCurrencyISOInteger",value:function(e){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"name"}).format(e)}},{key:"formatDate",value:function(e,r){var t={year:"numeric",month:"numeric",day:"numeric"};switch(e){case"date_short":t={year:"numeric",month:"numeric",day:"numeric"};break;case"date_medium":t={month:"short",day:"numeric",year:"numeric"};break;case"date_long":t={month:"long",day:"numeric",year:"numeric"};break;case"week_date_short":t={month:"numeric",day:"numeric",weekday:"short"};break;case"week_date_short_v2":t={month:"2-digit",day:"2-digit",weekday:"short",year:"2-digit"};break;case"week_date_long":t={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"week_long_date_short_v2":t={weekday:"long",day:"2-digit",month:"2-digit",year:"2-digit"};break;case"date_weekday_long":t={weekday:"long"};break;case"week_long_date_medium_month":t={weekday:"long",month:"short",day:"numeric"};break;case"week_date_short_year_long":t={weekday:"short",month:"2-digit",day:"2-digit",year:"numeric"};break;case"date_short_year_long":t={year:"numeric",month:"2-digit",day:"2-digit"};break;case"date_short_v2":t={year:"2-digit",month:"2-digit",day:"2-digit"};break;case"date_medium_month_year":t={month:"short",year:"numeric"};break;case"date_full_month_year":t={month:"long",year:"numeric"};break;case"date_medium_month":t={month:"short",day:"numeric"};break;case"date_full_month":t={month:"long",day:"numeric"};break;case"time_12_24":t={hour:"numeric",minute:"2-digit"};break;case"date_short_12_24":t={month:"numeric",day:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit"};break;case"date_medium_12_24":t={month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"};break;case"date_long_12_24":t={month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"};break;case"week_date_short_12_24":t={month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"short"};break;case"date_weekday":t={weekday:"short"};break;case"date_short_month":t={month:"numeric",day:"numeric"}}return new Intl.DateTimeFormat(this.locale,t).format(r)}},{key:"alternateCurrencyFormat",value:function(e){switch("undefined"!=typeof ta&&ta.retrieve&&ta.retrieve("alternateCurrencyLabel")){case"hotels_alternative_currency_brazil":return e.replace(/\u0024/,"$ ");case"hotels_alternative_currency_russia":return e.replace(/\u20BD/,"руб");case"hotels_alternative_currency_france":case"hotels_alternative_currency_germany":return e.replace(/(\u00A0|\u0020)([a-zA-Z]*)([\W])/,"$2$3");case"hotels_alternative_currency_taiwan":return e.replace(/\u0024/,"NT$");case"hotels_alternative_currency_canada":case"hotels_alternative_currency_canadafr":return e.replace(/\u0024/,"C$");case"hotels_alternative_currency_australia":return e.replace(/\u0024/,"AU$");case"hotels_alternative_currency_singapore":return e.replace(/\u0024/,"S$");case"hotels_alternative_currency_italy":return e.replace(" €","€");case"hotels_alternative_currency_india":return e.replace("₹ ","₹");case"hotels_alternative_currency_argentina":return e.replace("$ ","$");case"hotels_alternative_currency_netherlands":return e.replace("€ ","€");case"hotels_alternative_currency_southkorea":return e.replace("₩","")+"원";case"hotels_alternative_currency_thailand":return e.replace("THB ","")+" บาท"}return e}}]),r}()});
