define("@ta/tracking.interactions",["@ta/common.global"],function(e){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(o,a,function(n){return e[n]}.bind(null,a));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/components/dist/",t(t.s="./packages/tracking/interactions/interactions.jsx")}({"./node_modules/react-apollo/react-apollo.browser.umd.js":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./node_modules/react-apollo/react-apollo.browser.umd.js")},"./node_modules/react-redux/es/index.js":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./node_modules/react-redux/es/index.js")},"./node_modules/react/index.js":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./packages/common/decode/decode.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/decode/decode.jsx")},"./packages/common/localstorage/localstorage.jsx":function(e,n,t){"use strict";var o=function(e){return function(){try{return e.apply(void 0,arguments)}catch(e){return null}}},a=function(){return window&&window.localStorage?window.localStorage:null},r=o(function(e){var n=a();n&&n.removeItem(e)}),i=o(function(e){var n=a();if(!n)return null;var t=JSON.parse(n.getItem(e)||"0");return t?t.ttl&&t.ttl+t.now<(new Date).getTime()?(r(e),null):t.value:null}),c=o(function(e,n,t){var o=a();o&&o.setItem(e,JSON.stringify({ttl:t||0,now:(new Date).getTime(),value:n}))});n.a={get:i,set:c,has:function(e){return!!i(e)},remove:r}},"./packages/common/logging/logging.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/logging/logging.jsx")},"./packages/tracking/interactions/LogInteractionV4.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractionV4"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interaction"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionV4Input"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractionV4"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interaction"},value:{kind:"Variable",name:{kind:"Name",value:"interaction"}}}],directives:[]}]}}],loc:{start:0,end:111}};t.loc.source={body:"mutation LogInteractionV4($interaction: InteractionV4Input!) {\n  logInteractionV4(interaction: $interaction)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/tracking/interactions/LogInteractions.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interactions"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionWithTimestampInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interactions"},value:{kind:"Variable",name:{kind:"Name",value:"interactions"}}},{kind:"Argument",name:{kind:"Name",value:"clientRequestTimestamp"},value:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}}}],directives:[]}]}}],loc:{start:0,end:211}};t.loc.source={body:"mutation LogInteractions(\n  $interactions: [InteractionWithTimestampInput]!\n  $clientRequestTimestamp: Long!\n) {\n  logInteractions(interactions: $interactions, clientRequestTimestamp: $clientRequestTimestamp)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/tracking/interactions/interactions.jsx":function(e,n,t){"use strict";t.r(n);var o=t("./node_modules/react/index.js"),a=t("./node_modules/react-redux/es/index.js"),r=t("./node_modules/react-apollo/react-apollo.browser.umd.js"),i=t("./packages/common/decode/decode.jsx"),c=t.n(i),l=t("./packages/common/localstorage/localstorage.jsx"),u=t("./packages/common/logging/logging.jsx"),s=t.n(u),d=o.createContext(null),m=o.createContext({itemId:""}),f=o.createContext(null),g=o.createContext(null),p=o.createContext(null),k=o.createContext(null),v=o.createContext(null),x=o.createContext(null),b=o.createContext(null),C=o.createContext(null),w=o.createContext(null),I=t("./packages/tracking/interactions/LogInteractions.gql"),h=t.n(I),y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},T=function(e){var n=l.a.get("interactionData");n&&(e({variables:{interactions:n,clientRequestTimestamp:(new Date).getTime()}}),l.a.remove("interactionData"))},j=function(e,n,t){!function(e){var n=l.a.get("interactionData");n||(n=[]);var t={eventTimestampMsClient:(new Date).getTime(),interaction:e};n.push(t),l.a.set("interactionData",n)}(n),function(e){var n=e.target,t=e.currentTarget;if(n&&t&&n instanceof HTMLElement){var o=n,a=!1;do{if(o instanceof HTMLElement&&o.dataset.encodedUrl){var r=c()(o.dataset.encodedUrl),i=document.createElement("a");i.href=r,o.parentElement instanceof HTMLElement&&(i.style.display="none",o.parentElement.appendChild(i)),o=i}if(o instanceof HTMLAnchorElement){var l=o;if(window&&window.location&&window.location.hostname&&window.location.hostname===l.hostname)return!0}a=o===t||a,o=o.parentElement}while(o&&!a)}return!1}(e)||T(t)},N=function(e,n){return o.createElement(f.Consumer,null,function(t){return t&&"mixer"===t.namespace?function(e,n){var t=n.children;return o.createElement(d.Consumer,null,function(n){return o.createElement(m.Consumer,null,function(o){return t(function(t,a,r){var i=r||{},c={};switch(a){case"delete":case"linkedPoiScroll":case"overflowMenuClick":case"report":case"seeAll":case"shelfScroll":case"untag":case"untagConfirm":case"untagCancel":c[a]={feedSectionId:n};break;case"linkedPoiClick":c[a]={feedSectionId:n,placement:"HEADER"},Object.assign(c[a],i);break;case"feedClick":case"helpful":case"repost":case"share":case"unhelpful":case"follow":case"unfollow":case"userClick":case"save":case"dismiss":case"userReferenceClick":c[a]={feedSectionId:n,itemId:o.itemId},Object.assign(c[a],i);break;case"showMore":c[a]=i;break;default:var l=a||"undefined";s.a.error("Unknown mixer interaction type: "+l)}j(t,{mixer:c},e)})})})}(e,n):t&&"home"===t.namespace?function(e,n){var t=n.children;return o.createElement(g.Consumer,null,function(n){return o.createElement(x.Consumer,null,function(o){return t(function(t,a,r){var i=r||{},c={};c["unfollow"===a?"unFollow":a]=y({},n,i,o),j(t,{home:c},e)})})})}(e,n):t&&"profile"===t.namespace?function(e,n){var t=n.children;return o.createElement(p.Consumer,null,function(n){return o.createElement(x.Consumer,null,function(o){return t(function(t,a,r){var i=r||{},c={};c["unfollow"===a?"unFollow":a]=y({},n,i,o),j(t,{profile:c},e)})})})}(e,n):t&&"onboarding"===t.namespace?function(e,n){var t=n.children;return o.createElement(b.Consumer,null,function(n){return t(function(t,o,a){var r=a||{},i={};i[o]=y({},r,n),j(t,{onboarding:i},e)})})}(e,n):t&&"inbox"===t.namespace?function(e,n){var t=n.children;return o.createElement(w.Consumer,null,function(n){return t(function(t,o,a){var r=a||{},i={};switch(o){case"follow":case"unfollow":i[o]={},Object.assign(i[o],r),Object.assign(i[o],n);break;default:var c=o||"undefined";s.a.error("Unknown or not set up inbox interactionType: "+c)}j(t,{inbox:i},e)})})}(e,n):t&&"search"===t.namespace?function(e,n){var t=n.children;return o.createElement(k.Consumer,null,function(n){return t(function(t,o,a){var r=a||{},i={};switch(o){case"follow":case"unfollow":i[o]={},Object.assign(i[o],r),Object.assign(i[o],n);break;default:var c=o||"undefined";s.a.error("Unknown or not set up search interactionType: "+c)}j(t,{search:i},e)})})}(e,n):t&&"ugcDetail"===t.namespace?function(e,n){var t=n.children,a=n.loggedInUserId;return o.createElement(v.Consumer,null,function(n){return t(function(t,o,r){var i=r||{},c=a?{actorUserId:a}:{},l={};l["feedClick"===o?"ugcClick":o]=y({},n,i,c),j(t,{ugcDetail:l},e)})})}(e,n):t&&"hotelReviewServlet"===t.namespace?function(e,n,t){var a=n.children;return o.createElement(C.Consumer,null,function(n){return a(function(o,a,r){var i=r||{},c={};c[a]=y({},i,n);var l={};l[t]=c,j(o,l,e)})})}(e,n,t.namespace):n.children(function(){})})},E=function(e){return e.isReadonlyMode?e.children(function(){}):o.createElement(o.Fragment,null,o.createElement(r.Mutation,{mutation:h.a},function(n){return T(n),N(n,e)}))};E.defaultProps={loggedInUserId:null};var O=Object(a.connect)(function(e,n){return y({loggedInUserId:e.auth.loggedInUserId,isReadonlyMode:e.meta.readonlyMode},n)})(E),S=o.createContext(null),D=o.createContext(null),L=t("./packages/tracking/interactions/LogInteractionV4.gql"),V=t.n(L);t.d(n,"InteractionLogger",function(){return O}),t.d(n,"TrackingNamespaceContext",function(){return f}),t.d(n,"ItemIdContext",function(){return m}),t.d(n,"FeedSectionIdContext",function(){return d}),t.d(n,"HomeTrackingContext",function(){return g}),t.d(n,"ProfileTrackingContext",function(){return p}),t.d(n,"InboxTrackingContext",function(){return w}),t.d(n,"SearchTrackingContext",function(){return k}),t.d(n,"OnboardingTrackingContext",function(){return b}),t.d(n,"UgcDetailTrackingContext",function(){return v}),t.d(n,"FollowPlacementContext",function(){return S}),t.d(n,"SocialHotelsTrackingContext",function(){return C}),t.d(n,"RecommendedFolloweesImpressionIdContext",function(){return x}),t.d(n,"FollowTabTypeContext",function(){return D}),t.d(n,"LogInteractionV4",function(){return V.a})},"dll-reference @ta/common.global":function(n,t){n.exports=e}})});