define("@ta/social.onboarding-controller",["@ta/overlays.managers","@ta/overlays.modal","@ta/platform.import","@ta/social.educational-tooltips","@ta/social.onboarding-state","@ta/social.suggested-followees","@ta/tracking.interactions","@ta/common.global"],function(e,n,o,t,r,a,i,l){return function(e){var n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/components/dist/",o(o.s="./packages/social/onboarding-controller/OnboardingController.jsx")}({"./node_modules/react-apollo/react-apollo.browser.umd.js":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./node_modules/react-apollo/react-apollo.browser.umd.js")},"./node_modules/react-redux/es/index.js":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./node_modules/react-redux/es/index.js")},"./node_modules/react/index.js":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./packages/common/api/api.jsx":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./packages/common/api/api.jsx")},"./packages/common/classnames/classnames.jsx":function(e,n,o){"use strict";o.d(n,"a",function(){return r}),o.d(n,"b",function(){return a});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(){for(var e=[],n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];for(var i=function(n){var a=o[n];if(a){var i=void 0===a?"undefined":t(a);"string"===i||"number"===i?e.push(a):Array.isArray(a)?e.push(r.apply(void 0,function(e){if(Array.isArray(e)){for(var n=0,o=Array(e.length);n<e.length;n++)o[n]=e[n];return o}return Array.from(e)}(a))):"object"===i&&Object.keys(a).filter(function(e){return a[e]}).forEach(function(n){return e.push(n)})}},l=0;l<o.length;l++)i(l);return e.join(" ")}function a(e,n,o){var t=e.split(" ").filter(function(e){return e!==n});return o&&t.push(o),t}},"./packages/common/client/ClientOnly.jsx":function(e,n,o){"use strict";var t=o("./node_modules/react/index.js"),r=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}();var a=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return o.componentDidMount=function(){o.setState({componentMounted:!0})},o.state={componentMounted:!1},o}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,t["Component"]),r(n,[{key:"render",value:function(){return this.state.componentMounted?this.props.children:null}}]),n}();n.a=a},"./packages/common/features/features.jsx":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./packages/common/features/features.jsx")},"./packages/common/localstorage/localstorage.jsx":function(e,n,o){"use strict";var t=function(e){return function(){try{return e.apply(void 0,arguments)}catch(e){return null}}},r=function(){return window&&window.localStorage?window.localStorage:null},a=t(function(e){var n=r();n&&n.removeItem(e)}),i=t(function(e){var n=r();if(!n)return null;var o=JSON.parse(n.getItem(e)||"0");return o?o.ttl&&o.ttl+o.now<(new Date).getTime()?(a(e),null):o.value:null}),l=t(function(e,n,o){var t=r();t&&t.setItem(e,JSON.stringify({ttl:o||0,now:(new Date).getTime(),value:n}))});n.a={get:i,set:l,has:function(e){return!!i(e)},remove:a}},"./packages/common/logging/logging.jsx":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./packages/common/logging/logging.jsx")},"./packages/common/throttle/throttle.jsx":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./packages/common/throttle/throttle.jsx")},"./packages/common/tracking/tracking.jsx":function(e,n,o){e.exports=o("dll-reference @ta/common.global")("./packages/common/tracking/tracking.jsx")},"./packages/events/window-scroll/WindowScroll.jsx":function(e,n,o){"use strict";var t=o("./node_modules/react/index.js"),r=o("./packages/common/throttle/throttle.jsx"),a=o.n(r),i=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}();function l(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var s=function(e){function n(){var e,o,t;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return o=t=l(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),t.handleScroll=t.props.throttle?a()(function(){t.props.callback()},t.props.throttle,t.props.useDebounce):t.props.callback,l(t,o)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,t["Component"]),i(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.disableListeners()}},{key:"disableListeners",value:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleScroll)}},{key:"render",value:function(){return null}}]),n}();s.defaultProps={throttle:200,useDebounce:!1},n.a=s},"./packages/social/feed/feedFragments/HometownFields.fragment.gql":function(e,n){var o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"HometownFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberLocation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:203}};o.loc.source={body:"fragment HometownFields on MemberLocation {\n  locationId\n  fallbackString\n  location {\n    locationId\n    name\n    additionalNames {\n      long\n    }\n    parent {\n      locationId\n      name\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=o},"./packages/social/onboarding-controller/OnboardingController.jsx":function(e,n,o){"use strict";o.r(n);var t=o("./node_modules/react/index.js"),r=o("./packages/common/api/api.jsx"),a=o("./packages/common/features/features.jsx"),i=o("./packages/common/tracking/tracking.jsx"),l=o.n(i),s=o("./packages/common/localstorage/localstorage.jsx"),c=o("./packages/events/window-scroll/WindowScroll.jsx"),d=o("@ta/social.educational-tooltips"),u=o("@ta/social.onboarding-state"),m=o("./node_modules/react-apollo/react-apollo.browser.umd.js"),f=o("./node_modules/react-redux/es/index.js"),p=o("./packages/common/client/ClientOnly.jsx"),g=o("./packages/common/logging/logging.jsx"),b=o.n(g),v=o("./packages/styleguide/loading/LoadingSpinner.jsx"),k=o("@ta/overlays.modal"),h=o("@ta/overlays.managers"),w=o("@ta/platform.import"),y=o("@ta/social.suggested-followees"),O=o("@ta/tracking.interactions"),_=o("./packages/common/classnames/classnames.jsx"),S=o("./packages/social/onboarding-controller/OnboardingProfileQuery.gql"),F=o.n(S),C=o("./packages/social/onboarding-controller/OnboardingModal.less"),N=o.n(C),E=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}();var I="valuepropscreen",j="followscreen_brand",A="Allsetscreen",T=[I,"namescreen",j,"facebookconnectscreen","followscreen_facebook",A],x=["namescreen",j,"facebookconnectscreen","followscreen_facebook",A],P=[j,"facebookconnectscreen","followscreen_facebook",A],L={UNKNOWN:"Social_onboarding_unknown",DEFAULT:"Social_onboarding_default",BRAND_EDUCATOR:"Social_onboarding_brandedu",MASTHEAD:"Social_onboarding_masthead",FOLLOW_ACTION:"Social_onboarding_follow_action",LIKE_ACTION:"Social_onboarding_like_action",REPOST_ACTION:"Social_onboarding_repost_action",SAVE_ACTION:"Social_onboarding_save_action",GOOGLE_ONETAP:"Social_onboarding_googleonetap"},M={UNKNOWN:T,DEFAULT:T,BRAND_EDUCATOR:x,MASTHEAD:x,FOLLOW_ACTION:P,LIKE_ACTION:P,REPOST_ACTION:P,SAVE_ACTION:P,GOOGLE_ONETAP:x},D=Object(w.deferredImport)("@ta/social.confirm-username","ConfirmUsername"),R=Object(w.deferredImport)("@ta/social.onboarding","SplashScreen"),U=Object(w.deferredImport)("@ta/social.onboarding","ChooseHometown"),H=Object(w.deferredImport)("@ta/social.onboarding","SuggestedFollows"),q=Object(w.deferredImport)("@ta/social.onboarding","FacebookConnect"),B=Object(w.deferredImport)("@ta/social.onboarding","SuggestedFacebookFollows"),G=Object(w.deferredImport)("@ta/social.onboarding","AllSet"),V=!0,W=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return o.onCloseAttempt=function(){o.screenAllowsClose()&&(l()({module:L[o.props.firedFrom],action:o.state.flow[o.state.screen]+"_close",context:o.userIsLoggedIn()?"logged_in":"logged_out"}),o.disableModal(),o.props.onClose&&o.props.onClose())},o.onRegOverlayComplete=function(e){if(o.userIsLoggedIn()){V=!0,o.incrementFlow();var n=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse);o.state.showLoading!==n&&o.setState({showLoading:n})}},o.onRegOverlayClose=function(e){void 0!==e.trigger?(o.disableModal(),o.props.onClose&&o.props.onClose()):o.state.waiting&&o.setState({waiting:!1})},o.openRegOverlay=function(){o.state.waiting||o.setState({waiting:!0}),window.require(["ta/registration/RegOverlay"],function(e){var n="MOBILE"===o.props.viewportCategory;e.showRegOverlay(null,null,n,{flow:"CORE_COMBINED",pid:40463,userRequestedForce:"true",extraQueryParams:{social:"true"},onSuccess:function(e){o.onRegOverlayComplete(e)},onClose:function(e){o.onRegOverlayClose(e)}})})},o.userIsLoggedIn=function(){return null!==o.props.loggedInUserId},o.screenAllowsClose=function(){switch(M[o.props.firedFrom]){case T:return o.state.flow[o.state.screen]===I;case P:return o.state.flow[o.state.screen]===j||o.state.flow[o.state.screen]===A&&"Home"!==o.props.servlet;case x:return o.state.flow[o.state.screen]===A&&"Home"!==o.props.servlet;default:return!1}},o.incrementFlow=function(){o.setState({screen:o.state.screen+1},function(){o.setUpCurrentFlow()})},o.incrementFlowAndUpdateNeedsRefresh=function(e){e&&o.setState({userMadeChanges:!0}),o.incrementFlow()},o.endFlow=function(e){o.disableModal(),e&&e(),o.props.onFlowEnd&&o.props.onFlowEnd(o.state.userMadeChanges)},o.disableModal=function(){o.state.disabled||o.setState({disabled:!0})},o.seenOnboarding=function(e){if(V=!1,null===e)return!1;switch(o.props.firedFrom){case"DEFAULT":case"UNKNOWN":return o.userIsLoggedIn()?e.states.find(function(e){return"ONBOARDING_CONFIRM_USER"===e.id&&"COMPLETED"===e.state}):e.states.find(function(e){return"ONBOARDING_SPLASH"===e.id});case"MASTHEAD":case"BRAND_EDUCATOR":case"GOOGLE_ONETAP":return e.states.find(function(e){return"ONBOARDING_CONFIRM_USER"===e.id&&"COMPLETED"===e.state});case"FOLLOW_ACTION":case"LIKE_ACTION":case"REPOST_ACTION":case"SAVE_ACTION":return e.states.find(function(e){return"ONBOARDING_FOLLOW"===e.id});default:return b.a.error("Unexpected flow state in onboarding, this should never happen."),!0}},o.state={disabled:e.readOnly,waiting:!1,showLoading:e.immediateLoad,screen:0,userMadeChanges:!1,flow:M[e.firedFrom]},V=!0,o}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,t["Component"]),E(n,[{key:"componentDidMount",value:function(){Object(a.featureIsEnabled)("suggested_facebook_connections")||this.setState({flow:this.state.flow.filter(function(e){return"followscreen_facebook"!==e})}),this.setUpCurrentFlow()}},{key:"shouldComponentUpdate",value:function(e){return this.props.firedFrom!==e.firedFrom&&(this.setState({disabled:!1,waiting:!1,showLoading:e.immediateLoad,screen:0,userMadeChanges:!1,flow:M[e.firedFrom]}),V=!0),!0}},{key:"setUpCurrentFlow",value:function(){this.state.screen>=this.state.flow.length&&this.endFlow()}},{key:"render",value:function(){var e=this;if(this.state.disabled||this.state.waiting||this.props.readOnly)return null;var n=function(n){var o,r,a,i=n.spinner,l=n.children,s={name:"onboarding-interstitial",isFullBleed:!0,onClose:e.onCloseAttempt,disableFullscreenOnMobile:e.state.flow[e.state.screen]===A,closeXColorVariant:e.state.flow[e.state.screen]===I||e.state.flow[e.state.screen]===A?"WHITE":void 0,closeX:e.screenAllowsClose()};return t.createElement(t.Fragment,null,t.createElement(h.Opener,{name:"onboarding-interstitial"},function(e){return e(),null}),t.createElement(k.Modal,s,t.createElement("div",{className:Object(_.a)(N.a.onboardingContainer,N.a[e.state.flow[e.state.screen]],(o={},r=N.a.spinner,a=i,r in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o))},l)))};return t.createElement(m.Query,{query:F.a,variables:{userId:this.props.loggedInUserId,loggedIn:this.userIsLoggedIn()},errorPolicy:"all"},function(o){var r=o.loading,a=o.data;if(r)return e.state.showLoading?t.createElement(n,{spinner:!0},t.createElement(v.a,null)):null;if(e.userIsLoggedIn()&&(!a||!a.memberProfiles||!a.memberProfiles[0]))return null;if(a&&a.insightProfile){var i=a.insightProfile.uiCardsState;if(V&&e.seenOnboarding(i))return l()({module:L[e.props.firedFrom],action:e.state.screen+"_notshown",context:e.userIsLoggedIn()?"logged_in":"logged_out"}),e.disableModal(),e.props.onDisable&&e.props.onDisable(),null}return"Home"===e.props.servlet&&e.state.flow[e.state.screen]===I&&"MOBILE"===e.props.viewportCategory?t.createElement(R,{onComplete:e.userIsLoggedIn()?e.incrementFlow:e.openRegOverlay,trackingModule:L[e.props.firedFrom]}):t.createElement(p.a,null,t.createElement(O.TrackingNamespaceContext.Provider,{value:{namespace:"onboarding"}},t.createElement(O.OnboardingTrackingContext.Provider,{value:{userId:e.props.loggedInUserId,uid:e.props.uid}},t.createElement(n,null,function(n){var o=n&&n.memberProfiles&&n.memberProfiles[0],r=o&&o.hometown&&o.hometown.location&&o.hometown.location.additionalNames&&o.hometown.location.additionalNames.long,a=n&&n.myExternallyConnectedAccountTypes&&n.myExternallyConnectedAccountTypes.includes("FACEBOOK");switch(e.state.flow[e.state.screen]){case I:return t.createElement(R,{onComplete:e.userIsLoggedIn()?e.incrementFlow:e.openRegOverlay,trackingModule:L[e.props.firedFrom]});case"namescreen":return t.createElement(h.Closer,null,function(n){return t.createElement(D,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,trackingModule:L[e.props.firedFrom],closerForError:function(){e.endFlow(n)}})});case"hometownscreen":return t.createElement(U,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,currentHometown:r,trackingModule:L[e.props.firedFrom]});case j:return t.createElement(O.FollowTabTypeContext.Provider,{value:{tabType:"SUGGESTED_FOR_YOU"}},t.createElement(H,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,trackingModule:L[e.props.firedFrom],isInitialScreen:M[e.props.firedFrom]===P}));case"facebookconnectscreen":return t.createElement(O.FollowTabTypeContext.Provider,{value:{tabType:"FACEBOOK_FRIENDS"}},t.createElement(q,{onComplete:e.incrementFlow,onSkip:function(){e.setState({screen:e.state.screen+2},function(){e.setUpCurrentFlow()})},facebookConnected:a,trackingModule:L[e.props.firedFrom]}));case"followscreen_facebook":return t.createElement(y.ValidatedFacebookToken,{callback:e.incrementFlow,trackingModule:L[e.props.firedFrom],isOnboarding:!0},t.createElement(B,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,trackingModule:L[e.props.firedFrom]}));case A:return t.createElement(h.Closer,null,function(n){return t.createElement(G,{photo:o.avatar,displayName:o.displayName,onComplete:function(){e.endFlow(n)},trackingModule:L[e.props.firedFrom],userHasInteracted:e.state.userMadeChanges})});default:return b.a.error("OnboardingModal: No case provided for current screen type: "+e.state.flow[e.state.screen]+" screen: "+e.state.screen+"."),null}}(a)))))})}}]),n}();W.defaultProps={onClose:void 0,onFlowEnd:void 0,onDisable:void 0};var K=Object(f.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId,viewportCategory:e.meta.device.viewportCategory,uid:e.tracking.uid,readOnly:e.meta.readonlyMode,servlet:e.meta.initialServletName}})(W),Q=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}();var z=["FOLLOW_ACTION","LIKE_ACTION","REPOST_ACTION","SAVE_ACTION"],Y=["Home","Profile"],$=null,J=750,X=["MASTHEAD","DEFAULT","BRAND_EDUCATOR","UNKNOWN"],Z=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return o.onFlowEnd=function(e){o.allowsPageRefresh()&&e?(s.a.set(d.OnboardingCompleteReload,!0),window.location.reload()):(o.setState({disabled:!0}),o.props.onboardingDone())},o.onClose=function(){o.setState({disabled:!0}),o.props.onboardingDone()},o.onDisable=function(){return o.setState({disabled:!0})},o.onScroll=function(){$+J<window.pageYOffset&&o.setState({waitForScroll:!1})},o.entryPointRequiresScrollToFire=function(){return z.includes(o.props.entryPoint)},o.allowsPageRefresh=function(){return o.isHome()&&X.includes(o.state.firedFrom)},o.allowsLaunchOnPageLoad=function(){return o.isHome()},o.isHome=function(){return"Home"===o.props.servlet},o.isDisabledThroughFeature=function(){return"DEFAULT"===o.props.entryPoint&&(Object(a.featureIsEnabled)("disable_default_social_onboarding")||Object(a.featureIsEnabled)("disable_default_social_onboarding_and_brand_educator"))||Object(a.featureIsEnabled)("onboarding_use_recommended_follow_modal")&&"DESKTOP"===o.props.viewportCategory||z.includes(o.props.entryPoint)&&(!Object(a.featureIsEnabled)("onboarding_new_entrypoints_test")||!Y.includes(o.props.servlet))||Object(a.featureIsEnabled)("onboarding_disable_on_non_component_header")&&"MASTHEAD"===o.props.entryPoint&&"Home"!==o.props.servlet||!Object(a.featureIsEnabled)("onboarding_after_google_onetap")&&"GOOGLE_ONETAP"===o.props.entryPoint},o.userIsLoggedIn=function(){return null!==o.props.loggedInUserId},o.state={disabled:o.isDisabledThroughFeature()||null!==e.cachedCookieFound&&e.cachedCookieFound,waitForSignal:!0,waitForScroll:!1,firedFrom:"DEFAULT"},o}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,t["Component"]),Q(n,[{key:"componentDidMount",value:function(){if(this.allowsLaunchOnPageLoad()){if(l()({module:L[this.state.firedFrom],action:"onboarding_onmount",context:this.userIsLoggedIn()?"logged_in":"logged_out"}),this.state.disabled)return void l()({module:L[this.state.firedFrom],action:"valuepropscreen_notshown",context:this.userIsLoggedIn()?"logged_in":"logged_out"});this.setState({waitForSignal:!1})}}},{key:"shouldComponentUpdate",value:function(e){return null===this.props.cachedCookieFound&&e.cachedCookieFound&&this.setState({disabled:!0}),!0}},{key:"componentDidUpdate",value:function(e){e.shouldFire||!this.props.shouldFire||this.isDisabledThroughFeature()||(this.setState({disabled:!1,waitForSignal:!1,waitForScroll:this.entryPointRequiresScrollToFire(),firedFrom:this.props.entryPoint}),this.entryPointRequiresScrollToFire()&&($=window.pageYOffset))}},{key:"render",value:function(){return this.state.disabled||this.state.waitForSignal||this.props.readOnly||null===this.props.cachedCookieFound?null:this.state.waitForScroll?t.createElement(c.a,{callback:this.onScroll,throttle:600}):t.createElement(K,{firedFrom:this.state.firedFrom,onFlowEnd:this.onFlowEnd,onClose:this.onClose,onDisable:this.onDisable,immediateLoad:this.props.immediateLoad})}}]),n}();n.default=Object(r.bind)({data:function(e,n){var o=n("/data/1.0/onboarding/shown");return function(){var n=o.get().data;return{loggedInUserId:e.auth.loggedInUserId,viewportCategory:e.meta.device.viewportCategory,shouldFire:Object(u.getState)(e).shouldFire,immediateLoad:Object(u.getState)(e).immediateLoad,entryPoint:Object(u.getState)(e).entryPoint,cachedCookieFound:n?n.seen:null,readOnly:e.meta.readonlyMode,servlet:e.meta.initialServletName}}},actions:{onboardingDone:d.ACTIONS.onboardingDone}})(Z)},"./packages/social/onboarding-controller/OnboardingModal.less":function(e,n,o){e.exports={onboardingContainer:"social-onboarding-controller-OnboardingModal__onboardingContainer--2qbeI",namescreen:"social-onboarding-controller-OnboardingModal__namescreen--2TuCQ",hometownscreen:"social-onboarding-controller-OnboardingModal__hometownscreen--2MKHH",facebookconnectscreen:"social-onboarding-controller-OnboardingModal__facebookconnectscreen--1A-fM",Allsetscreen:"social-onboarding-controller-OnboardingModal__Allsetscreen--21ouJ",followscreen_brand:"social-onboarding-controller-OnboardingModal__followscreen_brand--2OrdY",followscreen_facebook:"social-onboarding-controller-OnboardingModal__followscreen_facebook--3gX8S",spinner:"social-onboarding-controller-OnboardingModal__spinner--3e9ow",valuepropscreen:"social-onboarding-controller-OnboardingModal__valuepropscreen--PU6IV"}},"./packages/social/onboarding-controller/OnboardingProfileQuery.gql":function(e,n,o){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"OnboardingProfile"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userIds"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hometown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HometownFields"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"myExternallyConnectedAccountTypes"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"loggedIn"}}}]}]},{kind:"Field",name:{kind:"Name",value:"insightProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uiCardsState"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"states"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:533}};t.loc.source={body:'#import "../../../packages/social/feed/feedFragments/HometownFields.fragment.gql"\n\nquery OnboardingProfile($userId: String, $loggedIn: Boolean!) {\n  memberProfiles(userIds: [{ id: $userId }]) {\n    id\n    avatar {\n      id\n      photoSizes {\n        url\n        width\n        height\n      }\n    }\n    displayName\n    username\n    hometown {\n      ...HometownFields\n    }\n  }\n  myExternallyConnectedAccountTypes @include(if: $loggedIn)\n  insightProfile {\n    uiCardsState {\n      states {\n        id\n        state\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};t.definitions=t.definitions.concat(o("./packages/social/feed/feedFragments/HometownFields.fragment.gql").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)})),e.exports=t},"./packages/styleguide/loading/LoadingSpinner.jsx":function(e,n,o){"use strict";var t=o("./node_modules/react/index.js"),r=function(e){var n=e.size,o=e.inverted;return t.createElement("div",{className:"ui_spinner "+(n||"")+" "+(o?"inverted":"")})};r.defaultProps={size:void 0,inverted:!1},n.a=r},"@ta/overlays.managers":function(n,o){n.exports=e},"@ta/overlays.modal":function(e,o){e.exports=n},"@ta/platform.import":function(e,n){e.exports=o},"@ta/social.educational-tooltips":function(e,n){e.exports=t},"@ta/social.onboarding-state":function(e,n){e.exports=r},"@ta/social.suggested-followees":function(e,n){e.exports=a},"@ta/tracking.interactions":function(e,n){e.exports=i},"dll-reference @ta/common.global":function(e,n){e.exports=l}})});